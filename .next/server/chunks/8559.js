"use strict";exports.id=8559,exports.ids=[8559],exports.modules={58559:(a,b,c)=>{c.r(b),c.d(b,{ProjectList:()=>m});var d=c(8732),e=c(82015),f=c(74952),g=c(71423),h=c(49888),i=c(44233);function j({onImport:a,onExport:b,projectCount:c=0}){let e=(0,i.useRouter)();return(0,d.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your fibre installation projects"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,d.jsxs)("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(f._OO,{className:"h-4 w-4"}),"Import"]}),b&&c>0&&(0,d.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(f.f5X,{className:"h-4 w-4"}),"Export"]}),(0,d.jsxs)("button",{onClick:()=>e.push("/projects/create"),className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,d.jsx)(f.FWt,{className:"h-4 w-4"}),"Add Project"]})]})]})})}function k({summary:a,projects:b=[]}){let c,e=a||{totalProjects:b.length,activeProjects:b.filter(a=>"IN_PROGRESS"===a.status||"ACTIVE"===a.status).length,completedProjects:b.filter(a=>"COMPLETED"===a.status).length,totalBudget:b.reduce((a,b)=>a+(Number(b.budget_allocated)||0),0),onHoldProjects:b.filter(a=>"ON_HOLD"===a.status).length,highPriorityProjects:b.filter(a=>"HIGH"===a.priority||"CRITICAL"===a.priority).length};return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Total Projects"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalProjects})]}),(0,d.jsx)(f.BmN,{className:"h-8 w-8 text-blue-500"})]})}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.activeProjects})]}),(0,d.jsx)(f.ntg,{className:"h-8 w-8 text-green-500"})]})}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Completed"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.completedProjects})]}),(0,d.jsx)(f.rAV,{className:"h-8 w-8 text-blue-500"})]})}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"On Hold"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.onHoldProjects})]}),(0,d.jsx)(f.zD7,{className:"h-8 w-8 text-yellow-500"})]})}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Total Budget"}),(0,d.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(c=e.totalBudget,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c||0))})]}),(0,d.jsx)(f.G9t,{className:"h-8 w-8 text-purple-500"})]})}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"High Priority"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.highPriorityProjects})]}),(0,d.jsx)(f.RIJ,{className:"h-8 w-8 text-red-500"})]})})]})}function l({projects:a,isLoading:b,error:c,onDelete:g}){let h=(0,i.useRouter)(),[j,k]=(0,e.useState)(null),l=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A";return(0,d.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[b&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"Loading projects..."})}),c&&(0,d.jsx)("tr",{children:(0,d.jsxs)("td",{colSpan:8,className:"px-4 py-8 text-center text-red-600",children:["Error loading projects: ",c.message]})}),a&&0===a.length&&(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No projects found"})}),a?.map(a=>{var b;let c;return(0,d.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>h.push(`/projects/${a.id}`),children:[(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:a.code||`PRJ-${a.id.slice(0,6)}`})]})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-900",children:a.client_name||"N/A"})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm text-gray-900",children:[a.city,", ",a.state]})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(a=>{let b=a?.replace("_"," ");return(0,d.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${{PLANNING:"bg-blue-100 text-blue-800",IN_PROGRESS:"bg-green-100 text-green-800",ON_HOLD:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-gray-100 text-gray-800",CANCELLED:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"}`,children:b})})(a.status)}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(b=a.priority,(0,d.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${{LOW:"bg-gray-100 text-gray-800",MEDIUM:"bg-yellow-100 text-yellow-800",HIGH:"bg-orange-100 text-orange-800",CRITICAL:"bg-red-100 text-red-800"}[b]||"bg-gray-100 text-gray-800"}`,children:b?.toLowerCase()}))}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"text-sm text-gray-900",children:[l(a.start_date)," - ",l(a.end_date)]})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(c=Number(a.budget_allocated),new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c||0))})}),(0,d.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,d.jsxs)("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[(0,d.jsx)("button",{onClick:()=>k(j===a.id?null:a.id),className:"text-gray-400 hover:text-gray-600 p-1",children:(0,d.jsx)(f.GvN,{className:"h-4 w-4"})}),j===a.id&&(0,d.jsxs)("div",{className:"absolute right-0 top-8 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[(0,d.jsxs)("button",{onClick:()=>h.push(`/projects/${a.id}`),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,d.jsx)(f.kU3,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,d.jsxs)("button",{onClick:()=>h.push(`/projects/${a.id}/edit`),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,d.jsx)(f.ffu,{className:"h-4 w-4 mr-2"}),"Edit"]}),g&&(0,d.jsxs)("button",{onClick:()=>g(a.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center",children:[(0,d.jsx)(f.TBR,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},a.id)})]})]})})})}function m(){let[a,b]=(0,e.useState)(""),[c,i]=(0,e.useState)(!1),[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)([]),{projects:q,loading:r,error:s}=function(){let[a,b]=(0,e.useState)([]),[c,d]=(0,e.useState)(!0),[f,i]=(0,e.useState)(null);return{projects:a,loading:c,error:f,refetch:async()=>{try{d(!0);let a=await g.Q.getAll();b(a),i(null)}catch(a){i("Failed to fetch projects"),h.Rm.error("Error fetching projects:",{data:a},"useNeonProjects")}finally{d(!1)}}}}(),t=q.filter(b=>{let c=!a||b.name?.toLowerCase().includes(a.toLowerCase())||b.client_name?.toLowerCase().includes(a.toLowerCase())||b.city?.toLowerCase().includes(a.toLowerCase()),d=0===m.length||m.includes(b.status),e=0===o.length||o.includes(b.priority);return c&&d&&e}),u=async a=>{if(!confirm("Are you sure you want to delete this project? This action cannot be undone."))return},v=async()=>{alert("Export functionality coming soon")};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(j,{onExport:v,projectCount:t.length}),(0,d.jsx)(k,{projects:q}),(0,d.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("form",{onSubmit:a=>{a.preventDefault()},className:"flex-1 max-w-md",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(f.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,d.jsx)("input",{type:"text",placeholder:"Search projects...",value:a,onChange:a=>b(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,d.jsxs)("button",{onClick:()=>i(!c),className:`flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ${c||m.length>0||o.length>0?"bg-blue-50 text-blue-700 border-blue-200":"text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[(0,d.jsx)(f.dJT,{className:"h-4 w-4"}),"Filters",(m.length>0||o.length>0)&&(0,d.jsx)("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-0.5",children:m.length+o.length})]})]}),c&&(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,d.jsx)("div",{className:"space-y-2",children:["PLANNING","IN_PROGRESS","ON_HOLD","COMPLETED","CANCELLED"].map(a=>(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",checked:m.includes(a),onChange:b=>{b.target.checked?n([...m,a]):n(m.filter(b=>b!==a))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,d.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:a.replace("_"," ")})]},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,d.jsx)("div",{className:"space-y-2",children:["LOW","MEDIUM","HIGH","CRITICAL"].map(a=>(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",checked:o.includes(a),onChange:b=>{b.target.checked?p([...o,a]):p(o.filter(b=>b!==a))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,d.jsx)("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:a.toLowerCase()})]},a))})]})]}),(m.length>0||o.length>0)&&(0,d.jsx)("div",{className:"mt-4 flex justify-end",children:(0,d.jsx)("button",{onClick:()=>{n([]),p([])},className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear all filters"})})]})]}),(0,d.jsx)(l,{projects:t,isLoading:r,error:s?Error(s):null,onDelete:u})]})}},71423:(a,b,c)=>{c.d(b,{Q:()=>f});var d=c(49888);class e{async getAll(){try{let a=await fetch(this.baseUrl);if(!a.ok)throw Error(`Failed to fetch projects: ${a.statusText}`);return(await a.json()).projects||[]}catch(a){throw d.Rm.error("Error fetching projects:",a,"ProjectsService"),a}}async getById(a){try{let b=await fetch(`${this.baseUrl}/${a}`);if(!b.ok){if(404===b.status)return null;throw Error(`Failed to fetch project: ${b.statusText}`)}return(await b.json()).project}catch(a){throw d.Rm.error("Error fetching project by ID:",a,"ProjectsService"),a}}async create(a){try{let b=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error(`Failed to create project: ${b.statusText}`);return(await b.json()).project}catch(a){throw d.Rm.error("Error creating project:",a,"ProjectsService"),a}}async update(a,b){try{let c=await fetch(`${this.baseUrl}/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error(`Failed to update project: ${c.statusText}`);return(await c.json()).project}catch(a){throw d.Rm.error("Error updating project:",a,"ProjectsService"),a}}async delete(a){try{let b=await fetch(`${this.baseUrl}/${a}`,{method:"DELETE"});if(!b.ok)throw Error(`Failed to delete project: ${b.statusText}`)}catch(a){throw d.Rm.error("Error deleting project:",a,"ProjectsService"),a}}async getByClient(a){try{let b=await fetch(`${this.baseUrl}?clientId=${a}`);if(!b.ok)throw Error(`Failed to fetch projects by client: ${b.statusText}`);return(await b.json()).projects||[]}catch(a){throw d.Rm.error("Error fetching projects by client:",a,"ProjectsService"),a}}async getStats(){try{let a=await fetch(`${this.baseUrl}/stats`);if(!a.ok)throw Error(`Failed to fetch project stats: ${a.statusText}`);return await a.json()}catch(a){throw d.Rm.error("Error fetching project stats:",a,"ProjectsService"),a}}async search(a){try{let b=await fetch(`${this.baseUrl}/search?q=${encodeURIComponent(a)}`);if(!b.ok)throw Error(`Failed to search projects: ${b.statusText}`);return(await b.json()).projects||[]}catch(a){throw d.Rm.error("Error searching projects:",a,"ProjectsService"),a}}constructor(){this.baseUrl="/api/projects"}}let f=new e}};