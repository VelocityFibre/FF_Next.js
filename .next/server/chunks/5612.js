"use strict";exports.id=5612,exports.ids=[5612],exports.modules={2740:(a,b,c)=>{c.d(b,{s:()=>d});let d={initializeTables:async a=>(await fetch("/api/sow/initialize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:a})})).json(),async uploadPoles(a,b){if(b.length<=300)return this._uploadPolesChunk(a,b);console.log(`Uploading ${b.length} poles in chunks of 300`);let c=0,d=0,e=[];for(let f=0;f<b.length;f+=300){let g=b.slice(f,f+300),h=Math.floor(f/300)+1,i=Math.ceil(b.length/300);console.log(`Uploading chunk ${h}/${i} (${g.length} poles)`);try{let b=await this._uploadPolesChunk(a,g);c+=b.inserted||0,d+=b.updated||0,b.errors&&e.push(...b.errors)}catch(a){throw console.error(`Chunk ${h} failed:`,a),Error(`Failed at chunk ${h}/${i}: ${a.message}`)}f+300<b.length&&await new Promise(a=>setTimeout(a,100))}return{success:!0,inserted:c,updated:d,errors:e,message:`Successfully uploaded ${b.length} poles in ${Math.ceil(b.length/300)} chunks`}},async _uploadPolesChunk(a,b){let c=await fetch("/api/sow/poles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:a,poles:b})});if(!c.ok){let a=await c.text();throw console.error("Upload poles failed:",c.status,a),Error(`Upload failed: ${c.status} - ${a.substring(0,100)}`)}let d=c.headers.get("content-type");if(!d||!d.includes("application/json"))throw console.error("Non-JSON response:",(await c.text()).substring(0,200)),Error("Server returned non-JSON response");return c.json()},getPoles:async a=>(await fetch(`/api/sow/poles?projectId=${a}`)).json(),async uploadDrops(a,b){if(b.length<=250)return this._uploadDropsChunk(a,b);console.log(`Uploading ${b.length} drops in chunks of 250`);let c=0,d=0,e=[];for(let f=0;f<b.length;f+=250){let g=b.slice(f,f+250),h=Math.floor(f/250)+1,i=Math.ceil(b.length/250);console.log(`Uploading chunk ${h}/${i} (${g.length} drops)`);try{let b=await this._uploadDropsChunk(a,g);c+=b.inserted||0,d+=b.updated||0,b.errors&&e.push(...b.errors)}catch(a){throw console.error(`Chunk ${h} failed:`,a),Error(`Failed at chunk ${h}/${i}: ${a.message}`)}f+250<b.length&&await new Promise(a=>setTimeout(a,100))}return{success:!0,inserted:c,updated:d,errors:e,message:`Successfully uploaded ${b.length} drops in ${Math.ceil(b.length/250)} chunks`}},async _uploadDropsChunk(a,b){let c=await fetch("/api/sow/drops",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:a,drops:b})});if(!c.ok){let a=await c.text();throw console.error("Upload drops failed:",c.status,a),Error(`Upload failed: ${c.status} - ${a.substring(0,100)}`)}let d=c.headers.get("content-type");if(!d||!d.includes("application/json"))throw console.error("Non-JSON response:",(await c.text()).substring(0,200)),Error("Server returned non-JSON response");return c.json()},getDrops:async a=>(await fetch(`/api/sow/drops?projectId=${a}`)).json(),async uploadFibre(a,b){if(b.length<=200)return this._uploadFibreChunk(a,b);console.log(`Uploading ${b.length} fibre records in chunks of 200`);let c=0,d=0,e=[];for(let f=0;f<b.length;f+=200){let g=b.slice(f,f+200),h=Math.floor(f/200)+1,i=Math.ceil(b.length/200);console.log(`Uploading chunk ${h}/${i} (${g.length} fibre records)`);try{let b=await this._uploadFibreChunk(a,g);c+=b.inserted||0,d+=b.updated||0,b.errors&&e.push(...b.errors)}catch(a){throw console.error(`Chunk ${h} failed:`,a),Error(`Failed at chunk ${h}/${i}: ${a.message}`)}f+200<b.length&&await new Promise(a=>setTimeout(a,100))}return{success:!0,inserted:c,updated:d,errors:e,message:`Successfully uploaded ${b.length} fibre records in ${Math.ceil(b.length/200)} chunks`}},async _uploadFibreChunk(a,b){let c=await fetch("/api/sow/fibre",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:a,fibres:b})});if(!c.ok){let a=await c.text();throw console.error("Upload fibre failed:",c.status,a),Error(`Upload failed: ${c.status} - ${a.substring(0,100)}`)}return c.json()},getFibre:async a=>(await fetch(`/api/sow/fibre?projectId=${a}`)).json(),getProjectSOWData:async a=>(await fetch(`/api/sow/project?projectId=${a}`)).json(),async getSOWSummary(a){let b=a?`?projectIds=${a.join(",")}`:"";return(await fetch(`/api/sow/summary${b}`)).json()},checkHealth:async()=>(await fetch("/api/sow/health")).json()}},3509:(a,b,c)=>{c.d(b,{o:()=>f});var d=c(8732),e=c(18139);function f({project:a}){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Stats"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Budget Used"}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,e.vv)(a.actualCost||0)})]}),a.actualCost&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Actual Cost"}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,e.vv)(a.actualCost)})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Current Phase"}),(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.phase||"Planning"})]})]})]})}},5612:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{ProjectDetail:()=>v});var e=c(8732),f=c(82015),g=c(54822),h=c(56174),i=c(81711),j=c(16437),k=c(34942),l=c(20419),m=c(97981),n=c(30751),o=c(99328),p=c(3509),q=c(61213),r=c(84815),s=c(80490),t=c(14677),u=a([h,i]);function v(){let a=(0,g.useNavigate)(),{id:b}=(0,g.useParams)(),[c,d]=(0,f.useState)("overview"),{data:u,isLoading:v,error:w}=(0,h.By)(b),{data:x,isLoading:y}=(0,h.Ww)(b),z=(0,h.eW)();if(v)return(0,e.jsx)(s.Z,{});if(w||!u)return(0,e.jsx)(t.q,{onNavigateBack:()=>a("/app/projects")});let A=async()=>{window.confirm("Are you sure you want to delete this project? This action cannot be undone.")&&(await z.mutateAsync(b),a("/app/projects"))};return(0,e.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,e.jsx)(l.g,{project:u,onNavigateBack:()=>a("/app/projects"),onEdit:()=>a(`/app/projects/${b}/edit`),onDelete:A}),(0,e.jsx)(m.m,{project:u}),(0,e.jsx)(n.S,{activeTab:c,onTabChange:d}),"overview"===c&&(0,e.jsx)("div",{className:"space-y-6",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,e.jsx)(j.k,{project:u}),(0,e.jsx)(k.x,{project:u})]}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)(o.R,{project:u}),(0,e.jsx)(p.o,{project:u})]})]})}),"hierarchy"===c&&(0,e.jsx)(q.o,{hierarchy:x,isLoading:y}),"sow"===c&&(0,e.jsx)(i.G,{projectId:b,projectName:u.name}),"timeline"===c&&(0,e.jsx)(r.C,{})]})}[h,i]=u.then?(await u)():u,d()}catch(a){d(a)}})},9508:(a,b,c)=>{c.d(b,{O:()=>d});let d=[{type:"poles",title:"Poles Data",description:"Excel file with pole numbers, coordinates, and capacity",icon:null,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",requiredColumns:["pole_number","latitude","longitude"],sampleData:[{pole_number:"P001",latitude:-33.9249,longitude:18.4241,max_drops:12},{pole_number:"P002",latitude:-33.9251,longitude:18.4243,max_drops:12}]},{type:"drops",title:"Drops Data",description:"Excel file with drop numbers, addresses, and pole assignments",icon:null,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",requiredColumns:["drop_number","pole_number","address"],sampleData:[{drop_number:"D001",pole_number:"P001",address:"123 Main St",status:"planned"},{drop_number:"D002",pole_number:"P001",address:"125 Main St",status:"planned"}]},{type:"fibre",title:"Fibre Scope",description:"Excel file with cable segments, distances, and types",icon:null,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",requiredColumns:["segment_id","from_point","to_point","distance"],sampleData:[{segment_id:"S001",from_point:"P001",to_point:"P002",distance:150,cable_type:"aerial"},{segment_id:"S002",from_point:"P002",to_point:"P003",distance:200,cable_type:"underground"}]}]},14677:(a,b,c)=>{c.d(b,{q:()=>e});var d=c(8732);function e({onNavigateBack:a}){return(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Project not found"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"The project you're looking for doesn't exist or has been deleted."}),(0,d.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Projects"})]})})}},16437:(a,b,c)=>{c.d(b,{k:()=>f});var d=c(8732),e=c(74952);function f({project:a}){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Information"}),(0,d.jsxs)("div",{className:"space-y-4",children:[a.description&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),(0,d.jsx)("p",{className:"text-gray-900",children:a.description})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Location"}),(0,d.jsxs)("div",{className:"flex items-center text-gray-900",children:[(0,d.jsx)(e.sDd,{className:"h-4 w-4 mr-2"}),a.location]})]}),a.clientName&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Client"}),(0,d.jsxs)("div",{className:"flex items-center text-gray-900",children:[(0,d.jsx)(e.t6i,{className:"h-4 w-4 mr-2"}),a.clientName]})]})]})]})]})}},18139:(a,b,c)=>{c.d(b,{$4:()=>i,X4:()=>h,Yq:()=>e,me:()=>f,oU:()=>g,sb:()=>j,vv:()=>d});let d=a=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(a),e=a=>a?(a.toDate?a.toDate():new Date(a)).toLocaleDateString("en-ZA",{day:"numeric",month:"short",year:"numeric"}):"N/A",f=a=>a?a.charAt(0).toUpperCase()+a.slice(1).replace("_"," "):"Unknown",g=a=>a?a.charAt(0).toUpperCase()+a.slice(1)+" Priority":"No Priority",h=a=>a?a.toUpperCase():"STANDARD",i=a=>Math.round(a||0),j=()=>[{id:"overview",label:"Overview"},{id:"hierarchy",label:"Project Hierarchy"},{id:"sow",label:"SOW Data"},{id:"timeline",label:"Timeline"}]},19829:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>l});var e=c(82015),f=c(15751),g=c(24797),h=c(36035),i=c(46310),j=c(49888),k=a([g]);function l(a,b){let[c,d]=(0,e.useState)([]),[k,l]=(0,e.useState)(!1),m=(0,g.sC)(),n=(a,b,c,e,f)=>{d(d=>d.map(d=>d.type===a?{...d,status:b,message:c,data:e,summary:f}:d))},o=async(b,c)=>{try{await m.saveSOWData(a,b,c)}catch(a){throw j.Rm.error(`Error saving ${b} to Firebase:`,{data:a},"useSOWUpload"),a}},p=async d=>{l(!0);try{let e;n(d.type,"processing","Reading file...");let f=await h.c.processFile(d.file,d.type);if(!f||0===f.length){n(d.type,"error","File is empty or has invalid format"),l(!1);return}n(d.type,"processing","Processing data...");let g=[],j={invalid:[],errors:[]};switch(d.type){case"poles":{let a=h.c.processPoles(f);g=(j=h.c.validatePoles(a)).valid;break}case"drops":{let a=h.c.processDrops(f);g=(j=h.c.validateDrops(a)).valid;break}case"fibre":{let a=h.c.processFibre(f);g=(j=h.c.validateFibre(a)).valid}}if(0===g.length){n(d.type,"error","No valid data found in file"),l(!1);return}switch(n(d.type,"processing","Initializing database..."),await i.j.initializeTables(a),n(d.type,"processing",`Uploading ${g.length} items to database...`),d.type){case"poles":e=await i.j.uploadPoles(a,g);break;case"drops":e=await i.j.uploadDrops(a,g);break;case"fibre":e=await i.j.uploadFibre(a,g)}if(await o(d.type,g),n(d.type,"success",e?.message||"Data uploaded successfully",g,{total:f.length,valid:g.length,invalid:j.invalid.length,warnings:j.errors.length>0?j.errors:void 0}),b){let a=c.reduce((a,b)=>(b.data&&(a[b.type]=b.data),a),{});a[d.type]=g,b(a)}}catch(a){j.Rm.error(`Error processing ${d.type} file:`,{data:a},"useSOWUpload"),n(d.type,"error",`Failed to process file: ${a instanceof Error?a.message:"Unknown error"}`)}finally{l(!1)}},q=async(a,b)=>{let c=b.target.files?.[0];if(!c)return;d(b=>b.filter(b=>b.type!==a));let e={type:a,file:c,status:"pending"};d(a=>[...a,e]),await p(e)};return{files:c,isProcessing:k,handleFileUpload:q,removeFile:a=>{d(b=>b.filter(b=>b.type!==a))},downloadTemplate:a=>{let b=f.utils.json_to_sheet(a.sampleData),c=f.utils.book_new();f.utils.book_append_sheet(c,b,"Template"),f.writeFile(c,`${a.type}_template.xlsx`)}}}g=(k.then?(await k)():k)[0],d()}catch(a){d(a)}})},20419:(a,b,c)=>{c.d(b,{g:()=>f});var d=c(8732),e=c(74952);function f({project:a,onNavigateBack:b,onEdit:c,onDelete:f}){return(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("button",{onClick:b,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,d.jsx)(e.nkM,{className:"h-5 w-5"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:a.name}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:a.code})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("button",{onClick:c,className:"inline-flex items-center px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(e.ffu,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,d.jsxs)("button",{onClick:f,className:"inline-flex items-center px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:[(0,d.jsx)(e.TBR,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}},23143:(a,b,c)=>{c.d(b,{J2:()=>h,PA:()=>g,bz:()=>i});var d=c(8732),e=c(26642),f=c(74952);let g={[e.Ks.PLANNING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",[e.Ks.ACTIVE]:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",[e.Ks.ON_HOLD]:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",[e.Ks.COMPLETED]:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",[e.Ks.CANCELLED]:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"},h={[e.bx.LOW]:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",[e.bx.MEDIUM]:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",[e.bx.HIGH]:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",[e.bx.CRITICAL]:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"},i=a=>{switch(a){case e.ko.COMPLETED:return(0,d.jsx)(f.rAV,{className:"h-5 w-5 text-green-600"});case e.ko.IN_PROGRESS:return(0,d.jsx)(f.N3h,{className:"h-5 w-5 text-blue-600"});case e.ko.ON_HOLD:return(0,d.jsx)(f.RIJ,{className:"h-5 w-5 text-red-600"});default:return(0,d.jsx)(f.jlt,{className:"h-5 w-5 text-gray-400"})}}},24797:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{MT:()=>j,io:()=>k,pA:()=>l,sC:()=>i,xf:()=>m});var e=c(28462),f=c(44337),g=c(78121),h=a([e,f,g]);function i(){let a=(0,e.useQueryClient)(),b=async(b,c,d)=>{let e=(0,f.writeBatch)(g.db),h=(0,f.doc)(g.db,"projects",b,"sow",c);e.set(h,{type:c,data:d,uploadedAt:new Date,itemCount:d.length}),"poles"===c?d.forEach(a=>{let c=(0,f.doc)(g.db,"projects",b,"poles",a.pole_number);e.set(c,{...a,projectId:b,createdAt:new Date})}):"drops"===c?d.forEach(a=>{let c=(0,f.doc)(g.db,"projects",b,"drops",a.drop_number);e.set(c,{...a,projectId:b,createdAt:new Date})}):"fibre"===c&&d.forEach(a=>{let c=(0,f.doc)(g.db,"projects",b,"fibre",a.segment_id);e.set(c,{...a,projectId:b,createdAt:new Date})}),await e.commit(),a.invalidateQueries({queryKey:["sow",b]}),a.invalidateQueries({queryKey:["project",b]})},c=async(a,b)=>{if(b){let c=(0,f.doc)(g.db,"projects",a,"sow",b),d=await (0,f.getDoc)(c);return d.exists()?d.data():null}{let b=(0,f.collection)(g.db,"projects",a,"sow");return(await (0,f.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}))}},d=async(b,c)=>{let d=(0,f.writeBatch)(g.db),e=(0,f.doc)(g.db,"projects",b,"sow",c);d.delete(e);let h="";if("poles"===c?h="poles":"drops"===c?h="drops":"fibre"===c&&(h="fibre"),h){let a=(0,f.collection)(g.db,"projects",b,h);(await (0,f.getDocs)(a)).docs.forEach(a=>{d.delete(a.ref)})}await d.commit(),a.invalidateQueries({queryKey:["sow",b]}),a.invalidateQueries({queryKey:["project",b]})};return{saveSOWData:b,getSOWData:c,deleteSOWData:d}}function j(a){return(0,e.useQuery)({queryKey:["sow",a],queryFn:async()=>{let b=(0,f.collection)(g.db,"projects",a,"sow"),c=await (0,f.getDocs)(b),d={};return c.docs.forEach(a=>{d[a.id]=a.data()}),d},enabled:!!a})}function k(a){return(0,e.useQuery)({queryKey:["poles",a],queryFn:async()=>{let b=(0,f.collection)(g.db,"projects",a,"poles");return(await (0,f.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}))},enabled:!!a})}function l(a){return(0,e.useQuery)({queryKey:["drops",a],queryFn:async()=>{let b=(0,f.collection)(g.db,"projects",a,"drops");return(await (0,f.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}))},enabled:!!a})}function m(a){return(0,e.useQuery)({queryKey:["fibre",a],queryFn:async()=>{let b=(0,f.collection)(g.db,"projects",a,"fibre");return(await (0,f.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}))},enabled:!!a})}[e,f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},26835:(a,b,c)=>{c.d(b,{p:()=>f});var d=c(8732),e=c(74952);function f({polesCount:a,dropsCount:b,fibreCount:c}){return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.sDd,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-blue-900",children:"Poles"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:a}),(0,d.jsx)("p",{className:"text-sm text-blue-700",children:"Infrastructure poles"})]})]})}),(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.ww0,{className:"h-8 w-8 text-green-600 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-green-900",children:"Drops"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-green-600",children:b}),(0,d.jsx)("p",{className:"text-sm text-green-700",children:"Home connections"})]})]})}),(0,d.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.A8q,{className:"h-8 w-8 text-purple-600 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-purple-900",children:"Fibre"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:c}),(0,d.jsx)("p",{className:"text-sm text-purple-700",children:"Cable segments"})]})]})})]})}},28798:(a,b,c)=>{c.d(b,{u:()=>f});var d=c(8732),e=c(74952);function f({onImportClick:a}){return(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(e.WmV,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SOW Data Found"}),(0,d.jsx)("p",{className:"text-gray-500 mb-6",children:"This project doesn't have any Scope of Work data yet."}),(0,d.jsxs)("button",{onClick:a,className:"inline-flex items-center px-6 py-3 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,d.jsx)(e._OO,{className:"w-4 h-4 mr-2"}),"Import SOW Data"]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Upload Excel files containing poles, drops, and fibre scope data"})})]})})}},30751:(a,b,c)=>{c.d(b,{S:()=>f});var d=c(8732),e=c(18139);function f({activeTab:a,onTabChange:b}){let c=(0,e.sb)();return(0,d.jsx)("div",{className:"border-b border-gray-200",children:(0,d.jsx)("nav",{className:"-mb-px flex space-x-8",children:c.map(c=>(0,d.jsx)("button",{onClick:()=>b(c.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${a===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:c.label},c.id))})})}},34942:(a,b,c)=>{c.d(b,{x:()=>e});var d=c(8732);function e({project:a}){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progress"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,d.jsx)("span",{children:"Overall Progress"}),(0,d.jsxs)("span",{children:[Math.round(a.actualProgress||0),"%"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,d.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${a.actualProgress||0}%`}})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,d.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:0}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"Tasks Completed"})]}),(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,d.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:0}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"Tasks Remaining"})]})]})]})]})}},35200:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>h});var e=c(8732),f=c(77020),g=a([f]);function h({type:a,data:b,maxRows:c=20}){let d=b.slice(0,c);return 0===b.length?(0,e.jsxs)("p",{className:"text-gray-500",children:["No ",a," data found"]}):"poles"===a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full text-sm",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Pole Number"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"GPS Coordinates"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Max Drops"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Status"})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map(a=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900",children:a.pole_number}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-600",children:a.latitude&&a.longitude?`${Number(a.latitude).toFixed(6)}, ${Number(a.longitude).toFixed(6)}`:"No GPS"}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.max_drops||12}),(0,e.jsx)("td",{className:"px-4 py-2",children:(0,e.jsx)("span",{className:(0,f.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","completed"===a.status?"bg-green-100 text-green-800":"in_progress"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:a.status||"planned"})})]},a.id||a.pole_number))})]})}),b.length>c&&(0,e.jsxs)("div",{className:"text-center py-4 text-gray-500 text-sm",children:["Showing first ",c," of ",b.length," poles"]})]}):"drops"===a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full text-sm",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Drop Number"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Pole Number"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Address"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Customer"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Status"})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map(a=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900",children:a.drop_number}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.pole_number||"Not assigned"}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.address||"Not specified"}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.customer_name||"-"}),(0,e.jsx)("td",{className:"px-4 py-2",children:(0,e.jsx)("span",{className:(0,f.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","active"===a.status?"bg-green-100 text-green-800":"installed"===a.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:a.status||"planned"})})]},a.id||a.drop_number))})]})}),b.length>c&&(0,e.jsxs)("div",{className:"text-center py-4 text-gray-500 text-sm",children:["Showing first ",c," of ",b.length," drops"]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full text-sm",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Segment ID"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"From → To"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Distance"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Cable Type"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Installation"}),(0,e.jsx)("th",{className:"px-4 py-2 text-left font-medium text-gray-900",children:"Status"})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map(a=>(0,e.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900",children:a.segment_id}),(0,e.jsxs)("td",{className:"px-4 py-2 text-gray-700",children:[a.from_point," → ",a.to_point]}),(0,e.jsxs)("td",{className:"px-4 py-2 text-gray-700",children:[a.distance,"m"]}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.cable_type||"standard"}),(0,e.jsx)("td",{className:"px-4 py-2 text-gray-700",children:a.installation_method||"aerial"}),(0,e.jsx)("td",{className:"px-4 py-2",children:(0,e.jsx)("span",{className:(0,f.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","installed"===a.status?"bg-green-100 text-green-800":"in_progress"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:a.status||"planned"})})]},a.id||a.segment_id))})]})}),b.length>c&&(0,e.jsxs)("div",{className:"text-center py-4 text-gray-500 text-sm",children:["Showing first ",c," of ",b.length," segments"]})]})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},36035:(a,b,c)=>{c.d(b,{c:()=>n});var d=c(89306);class e{static isValidPoleType(a){return["wood","concrete","steel","composite"].includes(a.toLowerCase())}static isValidPoleStatus(a){return["planned","installed","existing","removed"].includes(a.toLowerCase())}static isValidDateFormat(a){return!!a&&!isNaN(new Date(a).getTime())}static validateStatus(a,b){return a?b.includes(a.toLowerCase())?null:{field:"status",value:a,message:`Invalid status: ${a}. Valid values: ${b.join(", ")}`,severity:"error",code:"INVALID_STATUS"}:{field:"status",value:a,message:"Status is required",severity:"error",code:"MISSING_STATUS"}}}class f{static validateCoordinates(a,b){let c=[];return void 0!==a&&(a<-90||a>90)&&c.push({field:"latitude",value:a,message:`Invalid latitude: ${a}. Must be between -90 and 90`,severity:"error",code:"INVALID_LATITUDE"}),void 0!==b&&(b<-180||b>180)&&c.push({field:"longitude",value:b,message:`Invalid longitude: ${b}. Must be between -180 and 180`,severity:"error",code:"INVALID_LONGITUDE"}),c}static validateCoordinateQuality(a,b){let c=[];return a&&b&&a.toString()===b.toString()&&c.push({field:"coordinates",value:{latitude:a,longitude:b},message:"Latitude and longitude are identical - possible data entry error",severity:"warning",code:"SUSPICIOUS_COORDINATES"}),c}}class g{static validatePoleNumber(a){return a&&""!==a.trim()?/^[a-zA-Z0-9_-]+$/.test(a)?null:{field:"pole_number",value:a,message:`Invalid pole number format: ${a}. Only alphanumeric characters, hyphens, and underscores allowed`,severity:"error",code:"INVALID_POLE_NUMBER_FORMAT"}:{field:"pole_number",value:a,message:"Pole number is required",severity:"error",code:"MISSING_POLE_NUMBER"}}static validateDropId(a){return a&&""!==a.trim()?/^[a-zA-Z0-9_-]+$/.test(a)?null:{field:"drop_id",value:a,message:`Invalid drop ID format: ${a}`,severity:"error",code:"INVALID_DROP_ID_FORMAT"}:{field:"drop_id",value:a,message:"Drop ID is required",severity:"error",code:"MISSING_DROP_ID"}}static validateFibreLength(a){return null==a?null:a<=0?{field:"length",value:a,message:`Invalid fibre length: ${a}. Must be greater than 0`,severity:"error",code:"INVALID_FIBRE_LENGTH"}:a>1e4?{field:"length",value:a,message:`Fibre length seems unusually large: ${a}m. Please verify`,severity:"warning",code:"LARGE_FIBRE_LENGTH"}:null}static validateFibreType(a){if(!a)return null;let b=["single_mode","multi_mode","armored","aerial","underground","direct_buried"];return b.includes(a.toLowerCase())?null:{field:"fibre_type",value:a,message:`Invalid fibre type: ${a}. Valid types: ${b.join(", ")}`,severity:"error",code:"INVALID_FIBRE_TYPE"}}static validateServiceType(a){if(!a)return null;let b=["residential","business","enterprise","government","backhaul","distribution"];return b.includes(a.toLowerCase())?null:{field:"service_type",value:a,message:`Invalid service type: ${a}. Valid types: ${b.join(", ")}`,severity:"warning",code:"INVALID_SERVICE_TYPE"}}static validateHeight(a){return null==a?null:a<0?{field:"height",value:a,message:`Invalid height: ${a}. Cannot be negative`,severity:"error",code:"NEGATIVE_HEIGHT"}:a>100?{field:"height",value:a,message:`Height seems unusually large: ${a}m. Please verify`,severity:"warning",code:"LARGE_HEIGHT"}:null}static validateAddress(a){return a&&""!==a.trim()?a.length<5?{field:"address",value:a,message:`Address too short: "${a}". Minimum 5 characters`,severity:"warning",code:"SHORT_ADDRESS"}:a.length>200?{field:"address",value:a,message:`Address too long: ${a.length} characters. Maximum 200 characters`,severity:"error",code:"LONG_ADDRESS"}:null:null}static validateInstallationDate(a){if(!a)return null;if(!e.isValidDateFormat(a))return{field:"installation_date",value:a,message:`Invalid date format: ${a}`,severity:"error",code:"INVALID_DATE_FORMAT"};let b=new Date(a),c=new Date,d=new Date;if(d.setFullYear(c.getFullYear()+2),b>d)return{field:"installation_date",value:a,message:`Installation date is too far in the future: ${a}`,severity:"warning",code:"FUTURE_DATE"};let f=new Date;return(f.setFullYear(c.getFullYear()-50),b<f)?{field:"installation_date",value:a,message:`Installation date is too far in the past: ${a}`,severity:"warning",code:"VERY_OLD_DATE"}:null}}class h{static categorizeError(a){if(a.includes("latitude")||a.includes("longitude")||a.includes("coordinate"))return"Geographic";if(a.includes("date")||a.includes("Date"))return"Temporal";if(a.includes("required")||a.includes("Missing"))return"Required Fields";if(a.includes("format")||a.includes("Invalid"))return"Format/Type";if(a.includes("duplicate")||a.includes("Duplicate"))return"Duplicates";else if(a.includes("reference")||a.includes("orphaned"))return"References";else return"Other"}static getErrorSeverity(a){return["MISSING_POLE_NUMBER","MISSING_DROP_ID","INVALID_LATITUDE","INVALID_LONGITUDE","NEGATIVE_HEIGHT","INVALID_DATE_FORMAT"].includes(a)?"error":["LARGE_FIBRE_LENGTH","LARGE_HEIGHT","FUTURE_DATE","VERY_OLD_DATE","SHORT_ADDRESS","INVALID_SERVICE_TYPE"].includes(a)?"warning":"info"}}class i{static checkDataQuality(a){let b=[];return a.latitude&&a.longitude&&a.latitude.toString()===a.longitude.toString()&&b.push({field:"coordinates",value:{latitude:a.latitude,longitude:a.longitude},message:"Latitude and longitude are identical - possible data entry error",severity:"warning",code:"SUSPICIOUS_COORDINATES"}),b.push(...this.checkPlaceholderValues(a)),b}static checkPlaceholderValues(a){let b=[],c=["test","placeholder","tbd","n/a","unknown",""];return Object.entries(a).forEach(([a,d])=>{"string"==typeof d&&c.includes(d.toLowerCase())&&b.push({field:a,value:d,message:`Field contains placeholder value: "${d}"`,severity:"info",code:"PLACEHOLDER_VALUE"})}),b}static checkMissingCriticalFields(a,b){let c=[];return b.forEach(b=>{a[b]&&("string"!=typeof a[b]||""!==a[b].trim())||c.push({field:b,value:a[b],message:`Critical field "${b}" is missing or empty`,severity:"error",code:"MISSING_CRITICAL_FIELD"})}),c}static checkDataConsistency(a){let b=[];return a.installation_date&&a.planning_date&&new Date(a.installation_date)<new Date(a.planning_date)&&b.push({field:"installation_date",value:a.installation_date,message:"Installation date cannot be before planning date",severity:"error",code:"INCONSISTENT_DATES"}),"installed"!==a.status||a.installation_date||b.push({field:"installation_date",value:a.installation_date,message:'Installation date is required when status is "installed"',severity:"warning",code:"MISSING_INSTALLATION_DATE"}),b}}class j{static isValidPoleType(a){return e.isValidPoleType(a)}static isValidPoleStatus(a){return e.isValidPoleStatus(a)}static isValidDateFormat(a){return e.isValidDateFormat(a)}static validateStatus(a,b){return e.validateStatus(a,b)}static validateCoordinates(a,b){return f.validateCoordinates(a,b)}static validatePoleNumber(a){return g.validatePoleNumber(a)}static validateDropId(a){return g.validateDropId(a)}static validateFibreLength(a){return g.validateFibreLength(a)}static validateFibreType(a){return g.validateFibreType(a)}static validateServiceType(a){return g.validateServiceType(a)}static validateHeight(a){return g.validateHeight(a)}static validateAddress(a){return g.validateAddress(a)}static validateInstallationDate(a){return g.validateInstallationDate(a)}static categorizeError(a){return h.categorizeError(a)}static getErrorSeverity(a){return h.getErrorSeverity(a)}static checkDataQuality(a){return i.checkDataQuality(a)}}var k=c(49888);class l{static validatePoles(a){let b=[],c=[],d=[],e=new Set;for(let f of a){let a=[],g=j.validatePoleNumber(f.pole_number);g?a.push(g):e.has(f.pole_number)?a.push({field:"pole_number",value:f.pole_number,message:`Duplicate pole number: ${f.pole_number}`,severity:"error",code:"DUPLICATE_POLE_NUMBER"}):e.add(f.pole_number);let h=j.validateCoordinates(f.latitude,f.longitude);a.push(...h),f.pole_type&&!j.isValidPoleType(f.pole_type)&&a.push({field:"pole_type",value:f.pole_type,message:`Invalid pole type: ${f.pole_type}`,severity:"error",code:"INVALID_POLE_TYPE"}),f.status&&!j.isValidPoleStatus(f.status)&&a.push({field:"status",value:f.status,message:`Invalid pole status: ${f.status}`,severity:"error",code:"INVALID_POLE_STATUS"});let i=f.height?parseFloat(f.height):void 0,k=j.validateHeight(isNaN(i)?void 0:i);k&&a.push(k);let l=j.validateAddress(f.address);l&&a.push(l);let m=j.validateInstallationDate(f.installation_date);m&&a.push(m);let n=j.checkDataQuality(f);a.push(...n),0===a.length?b.push(f):(c.push({...f,errors:a}),d.push(...a.map(a=>`Pole ${f.pole_number}: ${a.message}`)))}return{valid:b,invalid:c,errors:d}}static validateDrops(a){let b=[],c=[],d=[],e=new Set;for(let f of a){let a=[],g=j.validateDropId(f.drop_number);g?a.push(g):e.has(f.drop_number)?a.push({field:"drop_number",value:f.drop_number,message:`Duplicate drop number: ${f.drop_number}`,severity:"error",code:"DUPLICATE_DROP_NUMBER"}):e.add(f.drop_number);let h=j.validateCoordinates(f.latitude,f.longitude);if(a.push(...h),f.cable_length){let b=parseFloat(f.cable_length);if(!isNaN(b)){let c=j.validateFibreLength(b);c&&a.push(c)}}let i=j.validateServiceType(f.service_type);i&&a.push(i);let l=j.validateAddress(f.address);l&&a.push(l);let m=j.checkDataQuality(f);a.push(...m),f.pole_number||k.Rm.warn(`Drop ${f.drop_number} has no pole assignment`,void 0,"sow-validator"),0===a.length?b.push(f):(c.push({...f,errors:a}),d.push(...a.map(a=>`Drop ${f.drop_number}: ${a.message}`)))}return{valid:b,invalid:c,errors:d}}static validateFibre(a){let b=[],c=[],d=[],e=new Set;for(let f of a){let a=[];f.segment_id?e.has(f.segment_id)?a.push({field:"segment_id",value:f.segment_id,message:`Duplicate segment ID: ${f.segment_id}`,severity:"error",code:"DUPLICATE_SEGMENT_ID"}):e.add(f.segment_id):a.push({field:"segment_id",value:f.segment_id,message:"Missing segment ID",severity:"error",code:"MISSING_SEGMENT_ID"});let g=j.validateFibreLength(f.length);g&&a.push(g);let h=j.validateFibreLength(f.string_completed);h&&a.push({...h,field:"string_completed",message:h.message.replace("fibre length","string completed length")}),void 0!==f.length&&void 0!==f.string_completed&&f.string_completed>f.length&&a.push({field:"string_completed",value:{length:f.length,string_completed:f.string_completed},message:`String completed (${f.string_completed}) exceeds total length (${f.length})`,severity:"error",code:"STRING_EXCEEDS_LENGTH"});let i=j.validateFibreType(f.fibre_type);i&&a.push(i);let k=j.validateInstallationDate(f.date_completed);k&&a.push({...k,field:"date_completed"});let l=j.checkDataQuality(f);a.push(...l),0===a.length?b.push(f):(c.push({...f,errors:a}),d.push(...a.map(a=>`Segment ${f.segment_id}: ${a.message}`)))}return{valid:b,invalid:c,errors:d}}static validateData(a,b){switch(b){case"poles":return this.validatePoles(a);case"drops":return this.validateDrops(a);case"fibre":return this.validateFibre(a);default:throw Error(`Unsupported data type: ${b}`)}}static crossValidateData(a,b){let c=new Set(a.map(a=>a.pole_number)),d=[],e=[],f=[],g=0,h=0;for(let a of b)a.pole_number&&(c.has(a.pole_number)?g++:(h++,d.push(a),e.includes(a.pole_number)||e.push(a.pole_number),f.push({dropId:a.drop_number,poleNumber:a.pole_number,issue:"References non-existent pole"})));return{orphanedDrops:d,missingPoles:e,inconsistentReferences:f,summary:{totalDrops:b.length,validReferences:g,invalidReferences:h}}}}class m{async processFile(a,b){let{processFile:d}=await Promise.resolve().then(c.bind(c,89306));return d(a,b)}processPoles(a){let b=[];for(let c of a){let a=(0,d.NX)(c,["label_1","label","pole_number","pole_id"]);if(!a)continue;let e={pole_number:a,latitude:(0,d.T_)(c,["lat","latitude","y","coord_y"])||void 0,longitude:(0,d.T_)(c,["lon","longitude","lng","x","coord_x"])||void 0,status:(0,d.NX)(c,["status","pole_status"])||"planned",pole_type:(0,d.NX)(c,["type_1","type","pole_type"]),pole_spec:(0,d.NX)(c,["spec_1","spec","specification"]),height:(0,d.NX)(c,["dim1","height","pole_height"]),diameter:(0,d.NX)(c,["dim2","diameter","pole_diameter"]),owner:(0,d.NX)(c,["cmpownr","owner","company_owner"]),pon_no:(0,d.T_)(c,["pon_no","pon","pon_number"]),zone_no:(0,d.T_)(c,["zone_no","zone","zone_number"]),address:(0,d.NX)(c,["address","location","pole_address"]),municipality:(0,d.NX)(c,["mun","municipality","city"]),created_date:(0,d._x)(c,["datecrtd","created_date","date_created"]),created_by:(0,d.NX)(c,["crtdby","created_by","creator"]),comments:(0,d.NX)(c,["comments","notes","remarks"]),raw_data:c};b.push(e)}return b}processDrops(a){let b=[];for(let c of a){let a=(0,d.NX)(c,["label","drop_number","drop_id","drop_label"]);if(!a)continue;let e={drop_number:a,pole_number:(0,d.NX)(c,["strtfeat","start_feature","pole_number","from_pole"])||"",cable_type:(0,d.NX)(c,["type","cable_type"]),cable_spec:(0,d.NX)(c,["spec","specification","cable_spec"]),cable_length:(0,d.NX)(c,["dim2","length","cable_length","distance"]),cable_capacity:(0,d.NX)(c,["cblcpty","capacity","cable_capacity"]),start_point:(0,d.NX)(c,["strtfeat","start_feature","from"]),end_point:(0,d.NX)(c,["endfeat","end_feature","to"]),latitude:(0,d.T_)(c,["lat","latitude","y"]),longitude:(0,d.T_)(c,["lon","longitude","lng","x"]),address:(0,d.NX)(c,["address","location","drop_address"]),pon_no:(0,d.T_)(c,["pon_no","pon","pon_number"]),zone_no:(0,d.T_)(c,["zone_no","zone","zone_number"]),municipality:(0,d.NX)(c,["mun","municipality","city"]),created_date:(0,d._x)(c,["datecrtd","created_date","date_created"]),created_by:(0,d.NX)(c,["crtdby","created_by","creator"]),raw_data:c};b.push(e)}return b}processFibre(a){let b=[];for(let c of a){let a=(0,d.NX)(c,["label","segment_id","fibre_id","cable_id"]);if(!a)continue;let e={segment_id:a,cable_size:(0,d.NX)(c,["cable size","cable_size","size","capacity"])||"",layer:(0,d.NX)(c,["layer","cable_layer","type"])||"",length:(0,d.T_)(c,["length","distance","cable_length"])||0,pon_no:(0,d.T_)(c,["pon_no","pon","pon_number"]),zone_no:(0,d.T_)(c,["zone_no","zone","zone_number"]),string_completed:(0,d.T_)(c,["String Com","string_completed","completed_length"]),date_completed:(0,d._x)(c,["Date Comp","date_completed","completion_date"]),contractor:(0,d.NX)(c,["Contractor","contractor","contractor_name"]),is_complete:(0,d.yG)(c,["Complete","is_complete","completed"]),raw_data:c};b.push(e)}return b}validatePoles(a){return l.validatePoles(a)}validateDrops(a){return l.validateDrops(a)}validateFibre(a){return l.validateFibre(a)}}let n=new m},46310:(a,b,c)=>{c.d(b,{j:()=>i});var d=c(2740),e=c(49888);class f{async initializeTables(a){try{return{success:(await d.s.initializeTables(a)).success}}catch(a){return e.Rm.error("Failed to initialize SOW tables",{data:a},"ApiSOWService"),{success:!1}}}async uploadPoles(a,b){try{let c=await d.s.uploadPoles(a,b);return{success:c.success,message:c.message||`Uploaded ${c.upserted||0} poles`,count:c.upserted||0,errors:c.errors||[]}}catch(a){return e.Rm.error("Failed to upload poles",{data:a},"ApiSOWService"),{success:!1,message:"Failed to upload poles",errors:[a instanceof Error?a.message:"Unknown error"]}}}async uploadDrops(a,b){try{let c=await d.s.uploadDrops(a,b);return{success:c.success,message:c.message||`Uploaded ${c.upserted||0} drops`,count:c.upserted||0,errors:c.errors||[]}}catch(a){return e.Rm.error("Failed to upload drops",{data:a},"ApiSOWService"),{success:!1,message:"Failed to upload drops",errors:[a instanceof Error?a.message:"Unknown error"]}}}async uploadFibre(a,b){try{let c=await d.s.uploadFibre(a,b);return{success:c.success,message:c.message||`Uploaded ${c.upserted||0} fibre sections`,count:c.upserted||0,errors:c.errors||[]}}catch(a){return e.Rm.error("Failed to upload fibre",{data:a},"ApiSOWService"),{success:!1,message:"Failed to upload fibre",errors:[a instanceof Error?a.message:"Unknown error"]}}}async getProjectSOWData(a){try{return await d.s.getProjectSOWData(a)}catch(a){return e.Rm.error("Failed to get project SOW data",{data:a},"ApiSOWService"),{success:!1,error:a instanceof Error?a.message:"Unknown error",data:null}}}async getPoles(a){try{return(await d.s.getPoles(a)).data||[]}catch(a){return e.Rm.error("Failed to get poles",{data:a},"ApiSOWService"),[]}}async getDrops(a){try{return(await d.s.getDrops(a)).data||[]}catch(a){return e.Rm.error("Failed to get drops",{data:a},"ApiSOWService"),[]}}async getFibre(a){try{return(await d.s.getFibre(a)).data||[]}catch(a){return e.Rm.error("Failed to get fibre",{data:a},"ApiSOWService"),[]}}async checkHealth(){try{return await d.s.checkHealth()}catch(a){return e.Rm.error("Failed to check SOW service health",{data:a},"ApiSOWService"),{success:!1,error:"Service unavailable"}}}}let g=new f;class h{async initializeTables(a){return this.service.initializeTables(a)}async uploadPoles(a,b){return this.service.uploadPoles(a,b)}async uploadDrops(a,b){return this.service.uploadDrops(a,b)}async uploadFibre(a,b){return this.service.uploadFibre(a,b)}async updateProjectSummary(a){let{SOWSummaryService:b}=await c.e(6641).then(c.bind(c,36641));return b.updateProjectSummary(a)}async getProjectSOWData(a){return this.service.getProjectSOWData(a)}async checkHealth(){return this.service.checkHealth()}constructor(){this.service=g}}let i=new h},52023:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>i});var e=c(8732),f=c(74952),g=c(77020),h=a([g]);function i({files:a,allFilesUploaded:b,onComplete:c,showActions:d}){return 0===a.length?null:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"bg-[var(--ff-background-secondary)] rounded-lg p-4",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-[var(--ff-text-primary)] mb-3",children:"Upload Summary"}),(0,e.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,e.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,e.jsxs)("span",{className:"text-[var(--ff-text-secondary)] capitalize",children:[a.type,":"]}),(0,e.jsx)("span",{className:(0,g.cn)("font-medium","success"===a.status?"text-success-600":"error"===a.status?"text-error-600":"processing"===a.status?"text-primary-600":"text-[var(--ff-text-tertiary)]"),children:"success"===a.status&&a.data?`${a.data.length} items`:"error"===a.status?"Failed":"processing"===a.status?"Processing...":"Pending"})]},a.type))})]}),d&&b&&c&&(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsxs)("button",{onClick:c,className:"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-success-600 rounded-lg hover:bg-success-700 focus:outline-none focus:ring-2 focus:ring-success-500",children:[(0,e.jsx)(f.rAV,{className:"w-4 h-4 mr-2"}),"Continue with SOW Data"]})})]})}g=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},60126:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{m:()=>l});var e=c(8732),f=c(74952),g=c(19829),h=c(92113),i=c(52023),j=c(9508),k=a([g,h,i]);function l({projectId:a,onComplete:b,onDataUpdate:c,showActions:d=!0}){let{files:k,isProcessing:l,handleFileUpload:m,removeFile:n,downloadTemplate:o}=(0,g.S)(a,c),p=j.O.map(a=>({...a,icon:"poles"===a.type?f.sDd:"drops"===a.type?f.ww0:f.A8q})),q=p.every(a=>k.find(b=>b.type===a.type&&"success"===b.status));return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:p.map(a=>{let b=k.find(b=>b.type===a.type);return(0,e.jsx)(h.A,{fileType:a,...b&&{uploadedFile:b},isProcessing:l,onFileUpload:m,onRemoveFile:n,onDownloadTemplate:()=>o(a)},a.type)})}),(0,e.jsx)(i.U,{files:k,allFilesUploaded:q,...b&&{onComplete:b},showActions:d})]})}[g,h,i]=k.then?(await k)():k,d()}catch(a){d(a)}})},61213:(a,b,c)=>{c.d(b,{o:()=>h});var d=c(8732),e=c(26642),f=c(23143),g=c(18139);function h({hierarchy:a,isLoading:b}){return b?(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,d.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a?(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Project Hierarchy"}),(0,d.jsx)("div",{className:"space-y-6",children:a.phases&&a.phases.length>0?a.phases.map(a=>(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,d.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,f.bz)(a.status),(0,d.jsxs)("div",{className:"ml-3",children:[(0,d.jsxs)("h3",{className:"text-base font-semibold text-gray-900",children:["Phase ",a.order,": ",a.name]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:[a.status.replace("_"," ")," • ",(0,g.$4)(a.progress),"% complete"]})]})]}),(0,d.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${(0,g.$4)(a.progress)}%`}})})]})}),a.steps&&a.steps.length>0&&(0,d.jsx)("div",{className:"p-4",children:(0,d.jsx)("div",{className:"space-y-4",children:a.steps.map(a=>(0,d.jsxs)("div",{className:"ml-4 border-l-2 border-gray-200 pl-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[a.status.replace("_"," ")," • ",a.estimatedHours,"h estimated"]})]}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,g.$4)(a.progress),"%"]})]}),a.tasks&&a.tasks.length>0&&(0,d.jsxs)("div",{className:"mt-2 ml-4 space-y-1",children:[a.tasks.slice(0,3).map(a=>(0,d.jsxs)("div",{className:"flex items-center text-xs",children:[(0,d.jsx)("div",{className:`w-2 h-2 rounded-full mr-2 ${a.status===e.e1.COMPLETED?"bg-green-500":a.status===e.e1.IN_PROGRESS?"bg-blue-500":"bg-gray-300"}`}),(0,d.jsx)("span",{className:"text-gray-600 truncate",children:a.name})]},a.id)),a.tasks.length>3&&(0,d.jsxs)("div",{className:"text-xs text-gray-500 ml-4",children:["+",a.tasks.length-3," more tasks"]})]})]},a.id))})})]},a.id)):(0,d.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No project phases available"})})]})}):(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:(0,d.jsx)("p",{className:"text-gray-500",children:"No hierarchy data available"})})}},67405:(a,b,c)=>{c.d(b,{V:()=>f});var d=c(8732),e=c(74952);function f({hasData:a,onUpdateClick:b}){return(0,d.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.WmV,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Scope of Work Data"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Project SOW data management"})]})]}),a&&(0,d.jsxs)("button",{onClick:b,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",children:[(0,d.jsx)(e.FWt,{className:"w-4 h-4 mr-2"}),"Update Data"]})]})})}},68571:(a,b,c)=>{c.d(b,{f:()=>e});var d=c(8732);function e({poles:a,drops:b}){if(0===a.length)return null;let c=a.reduce((a,b)=>a+(b.max_drops||12),0),e=b.length/a.length,f=b.length/(12*a.length)*100;return(0,d.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"Pole Statistics"}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-600",children:"Total Capacity:"}),(0,d.jsxs)("span",{className:"ml-2 font-medium text-blue-900",children:[c," drops"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-600",children:"Avg Drops/Pole:"}),(0,d.jsx)("span",{className:"ml-2 font-medium text-blue-900",children:e.toFixed(1)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-600",children:"Coverage:"}),(0,d.jsxs)("span",{className:"ml-2 font-medium text-blue-900",children:[f.toFixed(0),"%"]})]})]})]})}},78121:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{db:()=>l});var e=c(66551),f=c(86958),g=c(44337),h=c(82537),i=a([e,f,g,h]);[e,f,g,h]=i.then?(await i)():i;let j={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyDvW-ImXptnYIX7IDR78pdruw9BAp5A8Q8",authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"fibreflow-292c7.firebaseapp.com",projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"fibreflow-292c7",storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"fibreflow-292c7.firebasestorage.app",messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"178707510767",appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:178707510767:web:a9455c8f053de03fbff21a",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-3S74XHZ49B"},k=0===(0,e.getApps)().length?(0,e.initializeApp)(j):(0,e.getApp)();(0,f.getAuth)(k);let l=(0,g.getFirestore)(k);(0,h.getStorage)(k),d()}catch(a){d(a)}})},79248:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>i});var e=c(8732),f=c(74952),g=c(77020),h=a([g]);function i({activeTab:a,onTabChange:b,polesCount:c,dropsCount:d,fibreCount:h}){let i=[{id:"summary",label:"Summary",icon:f.Ilq},{id:"poles",label:`Poles (${c})`,icon:f.sDd},{id:"drops",label:`Drops (${d})`,icon:f.ww0},{id:"fibre",label:`Fibre (${h})`,icon:f.A8q},{id:"upload",label:"Import/Update",icon:f._OO}];return(0,e.jsx)("div",{className:"border-b border-gray-200",children:(0,e.jsx)("nav",{className:"-mb-px flex space-x-8 px-6",children:i.map(c=>{let d=c.icon;return(0,e.jsxs)("button",{onClick:()=>b(c.id),className:(0,g.cn)("py-2 px-1 border-b-2 font-medium text-sm flex items-center transition-colors",a===c.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,e.jsx)(d,{className:"h-4 w-4 mr-2"}),c.label]},c.id)})})})}g=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},80490:(a,b,c)=>{c.d(b,{Z:()=>e});var d=c(8732);function e(){return(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}},81711:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{G:()=>q});var e=c(8732),f=c(82015),g=c(24797),h=c(60126),i=c(28798),j=c(67405),k=c(79248),l=c(26835),m=c(90770),n=c(68571),o=c(35200),p=a([g,h,k,o]);function q({projectId:a,projectName:b="Project"}){let[c,d]=(0,f.useState)("summary"),[p,q]=(0,f.useState)(!1),{data:r,isLoading:s}=(0,g.MT)(a),{data:t=[]}=(0,g.io)(a),{data:u=[]}=(0,g.pA)(a),{data:v=[]}=(0,g.xf)(a),w=t.length>0||u.length>0||v.length>0;return s?(0,e.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,e.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading SOW data..."})]}):w||p?p?(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Import SOW Data"}),(0,e.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Upload Excel files containing poles, drops, and fibre scope data"})]}),(0,e.jsx)(h.m,{projectId:a,projectName:b,onComplete:()=>{q(!1),d("summary")}}),(0,e.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,e.jsx)("button",{onClick:()=>q(!1),className:"text-sm text-gray-600 hover:text-gray-700",children:"Cancel and go back"})})]}):(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,e.jsx)(j.V,{hasData:w,onUpdateClick:()=>d("upload")}),(0,e.jsx)(k.A,{activeTab:c,onTabChange:d,polesCount:t.length,dropsCount:u.length,fibreCount:v.length}),(0,e.jsxs)("div",{className:"p-6",children:["summary"===c&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)(l.p,{polesCount:t.length,dropsCount:u.length,fibreCount:v.length}),(0,e.jsx)(m.a,{sowData:r,polesCount:t.length,dropsCount:u.length,fibreCount:v.length}),(0,e.jsx)(n.f,{poles:t,drops:u})]}),"poles"===c&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Poles Data"}),(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," total poles"]})]}),(0,e.jsx)(o.U,{type:"poles",data:t})]}),"drops"===c&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Drops Data"}),(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[u.length," total drops"]})]}),(0,e.jsx)(o.U,{type:"drops",data:u})]}),"fibre"===c&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Fibre Segments"}),(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[v.length," total segments"]})]}),(0,e.jsx)(o.U,{type:"fibre",data:v})]}),"upload"===c&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import or Update SOW Data"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"Upload new Excel files to add or update poles, drops, and fibre scope data for this project."})]}),(0,e.jsx)(h.m,{projectId:a,projectName:b,onComplete:()=>{d("summary")},showActions:!1})]})]})]}):(0,e.jsx)(i.u,{onImportClick:()=>q(!0)})}[g,h,k,o]=p.then?(await p)():p,d()}catch(a){d(a)}})},84815:(a,b,c)=>{c.d(b,{C:()=>e});var d=c(8732);function e(){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Timeline"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Timeline view coming soon..."})]})}},89306:(a,b,c)=>{c.d(b,{NX:()=>k,T_:()=>l,_x:()=>m,processFile:()=>h,yG:()=>n});var d=c(15751),e=c(4927),f=c.n(e),g=c(49888);async function h(a,b){let c=a.name.split(".").pop()?.toLowerCase();if("csv"===c)return i(a,b);if(["xlsx","xls"].includes(c||""))return j(a,b);throw Error("Unsupported file format. Please upload Excel (.xlsx, .xls) or CSV files.")}async function i(a,b){return new Promise((b,c)=>{let d=new FileReader;d.onload=a=>{let c=a.target?.result,d=f().parse(c,{header:!0,dynamicTyping:!0,skipEmptyLines:!0});d.errors.length>0&&g.Rm.warn("CSV parsing warnings:",{data:d.errors},"parser"),b(d.data)},d.onerror=()=>{c(Error("Failed to read file"))},d.readAsText(a)})}async function j(a,b){let c=await a.arrayBuffer(),e=d.read(c,{type:"array",cellDates:!0,cellNF:!1,cellText:!1}),f=e.SheetNames[0],g=e.Sheets[f];return d.utils.sheet_to_json(g,{raw:!1,dateNF:"yyyy-mm-dd"})}function k(a,b){for(let c of b){if(void 0!==a[c]&&null!==a[c]&&""!==a[c])return String(a[c]).trim();let b=Object.keys(a).find(a=>a.toLowerCase()===c.toLowerCase());if(b&&void 0!==a[b]&&null!==a[b]&&""!==a[b])return String(a[b]).trim()}}function l(a,b){let c=k(a,b);if(c){let a=parseFloat(c);return isNaN(a)?void 0:a}}function m(a,b){let c=k(a,b);if(c)try{let a=new Date(c);if(!isNaN(a.getTime()))return a.toISOString()}catch(a){g.Rm.warn("Failed to parse date:",{data:c},"parser")}}function n(a,b){let c=k(a,b);if(c){let a=c.toLowerCase();if(["yes","true","1","complete","completed"].includes(a))return!0;if(["no","false","0","incomplete","pending"].includes(a))return!1}}},90770:(a,b,c)=>{c.d(b,{a:()=>f});var d=c(8732),e=c(74952);function f({sowData:a,polesCount:b,dropsCount:c,fibreCount:f}){return(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Data Status"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Source:"}),(0,d.jsx)("span",{className:"ml-2 font-medium",children:"Firebase Firestore"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,d.jsx)("span",{className:"ml-2 font-medium",children:a?.poles?.uploadedAt?new Date(a.poles.uploadedAt).toLocaleDateString():"Unknown"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Total Items:"}),(0,d.jsx)("span",{className:"ml-2 font-medium",children:b+c+f})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,d.jsxs)("span",{className:"ml-2 font-medium text-green-600",children:[(0,d.jsx)(e.rAV,{className:"inline w-4 h-4 mr-1"}),"Active"]})]})]})]})}},92113:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>i});var e=c(8732);c(82015);var f=c(74952),g=c(77020),h=a([g]);function i({fileType:a,uploadedFile:b,isProcessing:c,onFileUpload:d,onRemoveFile:h,onDownloadTemplate:i}){let l=a.icon;return(0,e.jsxs)("div",{className:(0,g.cn)("rounded-lg border-2 border-dashed p-6 transition-colors",b?.status==="success"?`${a.bgColor} ${a.borderColor}`:b?.status==="error"?"bg-error-50 border-error-200":"border-[var(--ff-border-secondary)] hover:border-[var(--ff-border-primary)]"),children:[(0,e.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,e.jsx)("div",{className:(0,g.cn)("p-2 rounded-lg",a.bgColor),children:(0,e.jsx)(l,{className:(0,g.cn)("w-6 h-6",a.color)})}),b&&(0,e.jsx)("button",{onClick:()=>h(a.type),className:"p-1 hover:bg-[var(--ff-surface-secondary)] rounded",children:(0,e.jsx)(f.TBR,{className:"w-4 h-4 text-[var(--ff-text-tertiary)]"})})]}),(0,e.jsx)("h3",{className:"font-medium text-[var(--ff-text-primary)] mb-1",children:a.title}),(0,e.jsx)("p",{className:"text-sm text-[var(--ff-text-secondary)] mb-4",children:a.description}),b?(0,e.jsx)(j,{uploadedFile:b}):(0,e.jsx)(k,{fileType:a,isProcessing:c,onFileUpload:d,onDownloadTemplate:i})]})}function j({uploadedFile:a}){return(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(f.nmj,{className:"w-4 h-4 text-[var(--ff-text-tertiary)]"}),(0,e.jsx)("span",{className:"text-sm text-[var(--ff-text-primary)] truncate",children:a.file.name})]}),"processing"===a.status&&(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(f.krw,{className:"w-4 h-4 animate-spin text-primary-500"}),(0,e.jsx)("span",{className:"text-sm text-[var(--ff-text-secondary)]",children:"Processing..."})]}),"success"===a.status&&a.summary&&(0,e.jsxs)("div",{className:"bg-success-50 rounded-lg p-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,e.jsx)(f.rAV,{className:"w-4 h-4 text-success-600"}),(0,e.jsx)("span",{className:"text-sm font-medium text-success-900",children:"Successfully processed"})]}),(0,e.jsxs)("div",{className:"text-xs text-success-700 space-y-1",children:[(0,e.jsxs)("p",{children:["Total rows: ",a.summary.total]}),(0,e.jsxs)("p",{children:["Valid: ",a.summary.valid]}),a.summary.invalid>0&&(0,e.jsxs)("p",{children:["Skipped: ",a.summary.invalid]})]}),a.summary.warnings&&a.summary.warnings.length>0&&(0,e.jsxs)("details",{className:"mt-2",children:[(0,e.jsxs)("summary",{className:"text-xs text-warning-600 cursor-pointer",children:[a.summary.warnings.length," warnings"]}),(0,e.jsxs)("div",{className:"mt-1 text-xs text-warning-600 max-h-20 overflow-y-auto",children:[a.summary.warnings.slice(0,5).map((a,b)=>(0,e.jsx)("p",{children:a},b)),a.summary.warnings.length>5&&(0,e.jsxs)("p",{children:["... and ",a.summary.warnings.length-5," more"]})]})]})]}),"error"===a.status&&(0,e.jsx)("div",{className:"bg-error-50 rounded-lg p-3",children:(0,e.jsxs)("div",{className:"flex items-start gap-2",children:[(0,e.jsx)(f.RIJ,{className:"w-4 h-4 text-error-600 mt-0.5"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-error-900",children:"Upload failed"}),(0,e.jsx)("p",{className:"text-xs text-error-700 mt-1",children:a.message})]})]})})]})}function k({fileType:a,isProcessing:b,onFileUpload:c,onDownloadTemplate:d}){return(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("label",{className:"block",children:[(0,e.jsx)("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:b=>c(a.type,b),className:"hidden",disabled:b}),(0,e.jsxs)("div",{className:(0,g.cn)("flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors cursor-pointer",b?"bg-[var(--ff-surface-secondary)] text-[var(--ff-text-tertiary)] cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"),children:[(0,e.jsx)(f._OO,{className:"w-4 h-4"}),"Upload File"]})]}),(0,e.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",children:[(0,e.jsx)(f.f5X,{className:"w-4 h-4"}),"Download Template"]})]})}g=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},97981:(a,b,c)=>{c.d(b,{m:()=>g});var d=c(8732),e=c(23143),f=c(18139);function g({project:a}){return(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${e.PA[a.status]||"bg-gray-100 text-gray-800"}`,children:(0,f.me)(a.status)}),(0,d.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${e.J2[a.priority]||"bg-gray-100 text-gray-800"}`,children:(0,f.oU)(a.priority)}),(0,d.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:(0,f.X4)(a.projectType)})]})}},99328:(a,b,c)=>{c.d(b,{R:()=>g});var d=c(8732),e=c(74952),f=c(18139);function g({project:a}){return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Details"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.VvS,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Start Date"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.Yq)(a.startDate)})]})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.VvS,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Expected End"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.Yq)(a.endDate)})]})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.G9t,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Budget"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:(0,f.vv)(a.budget||0)})]})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.zD7,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Working Hours"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"N/A"})]})]}),a.projectManager&&(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(e.zWC,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Project Manager"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:a.projectManager})]})]})]})]})}}};