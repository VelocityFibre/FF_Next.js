(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7528],{9674:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},17734:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18935:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]])},19345:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},21271:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30155:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},30359:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},30449:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},36535:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},46618:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},50843:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},52958:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},57009:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},58875:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},59452:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},66042:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},89099:(e,t,s)=>{e.exports=s(6763)},97528:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ClientList:()=>q});var r=s(37876),a=s(14232),l=s(67914),i=s(17734),n=s(59452),c=s(49711),d=s(19345),o=s(30155);function x(e){let{onFileSelect:t,dragActive:s,onDragEnter:a,onDragLeave:l,onDragOver:i,onDrop:n}=e;return(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(s?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:a,onDragLeave:l,onDragOver:i,onDrop:n,children:[(0,r.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop your CSV or Excel file here"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse from your computer"}),(0,r.jsx)("input",{type:"file",id:"client-file-upload",className:"hidden",accept:".csv,.xlsx,.xls",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0];if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"].includes(s.type))return void alert("Please upload a valid CSV or Excel file");t(s)}}}),(0,r.jsx)("label",{htmlFor:"client-file-upload",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 cursor-pointer",children:"Choose File"})]})}var m=s(18935),h=s(97842);function p(e){let{file:t,isImporting:s,onImport:a,onCancel:l}=e;return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m.A,{className:"h-8 w-8 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:t.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]})]}),(0,r.jsx)("button",{onClick:l,className:"p-1 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(h.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:a,disabled:s,className:"flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Import Clients"]})}),(0,r.jsx)("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"})]})]})}var u=s(30449),y=s(21271);function g(e){let{result:t,onReset:s}=e;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat(t.success?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[t.success?(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-600 mt-0.5"}):(0,r.jsx)(y.A,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"font-medium ".concat(t.success?"text-green-900":"text-yellow-900"),children:["Import ",t.success?"Successful":"Completed with Errors"]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:["✓ ",t.imported," clients imported successfully"]}),t.failed>0&&(0,r.jsxs)("p",{children:["✗ ",t.failed," rows failed to import"]})]})]})]})}),t.errors.length>0&&(0,r.jsxs)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[(0,r.jsx)("h4",{className:"font-medium text-red-900 mb-3",children:"Import Errors"}),(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.errors.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-red-700 p-2 bg-white rounded border border-red-200",children:[(0,r.jsxs)("span",{className:"font-medium",children:["Row ",e.row,":"]})," ",e.message,e.field&&"general"!==e.field&&(0,r.jsxs)("span",{className:"text-red-600",children:[" (Field: ",e.field,")"]})]},t))})]}),t.clients.length>0&&(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Imported Clients"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:t.clients.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.contactPerson})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:s,className:"flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Import More Clients"}),t.imported>0&&(0,r.jsx)("button",{onClick:()=>window.location.href="/clients",className:"flex-1 inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"View Client List"})]})]})}function j(){return(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Import Instructions"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Download the template to see the required format"}),(0,r.jsx)("li",{children:"• Required fields: Company Name, Contact Person, Email, and Phone"}),(0,r.jsx)("li",{children:"• Status options: active, inactive, suspended, prospect, former"}),(0,r.jsx)("li",{children:"• Category options: enterprise, sme, residential, government, non_profit, education, healthcare"}),(0,r.jsx)("li",{children:"• Priority options: low, medium, high, critical, vip"}),(0,r.jsx)("li",{children:"• Payment terms: immediate, net_7, net_14, net_30, net_60, net_90, prepaid"}),(0,r.jsx)("li",{children:"• Credit rating: excellent, good, fair, poor, unrated"}),(0,r.jsx)("li",{children:"• Service types should be comma-separated (e.g., ftth, enterprise, maintenance)"}),(0,r.jsx)("li",{children:"• Tags should be comma-separated for categorization"})]})]})}var b=s(46618);function f(e){let{onDownloadTemplate:t,onExportAll:s}=e;return(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Download Template"]}),(0,r.jsxs)("button",{onClick:s,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Export All Clients"]})]})}function N(){let{onComplete:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,a.useState)(!1),[l,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),u=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},y=e=>{o(e),i(null)},b=async()=>{if(n){s(!0);try{let t;t="text/csv"===n.type?await c.L.import.importFromCSV(n):await c.L.import.importFromExcel(n),i(t),t.success&&e&&e()}catch(e){i({success:!1,imported:0,failed:1,errors:[{row:0,field:"general",message:"Failed to import file. Please check the format and try again."}],clients:[]})}finally{s(!1)}}},N=async()=>{try{let e=await c.L.export.exportToExcel(),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="clients_export_".concat(new Date().toISOString().split("T")[0],".xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)}catch(e){alert("Failed to export client data")}},v=()=>{o(null),i(null)};return(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Clients"})]}),(0,r.jsx)(f,{onDownloadTemplate:()=>{let e=c.L.import.getImportTemplate(),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="client_import_template.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},onExportAll:N})]})}),(0,r.jsxs)("div",{className:"p-6",children:[!n&&!l&&(0,r.jsx)(x,{onFileSelect:y,dragActive:m,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&y(e.dataTransfer.files[0])}}),n&&!l&&(0,r.jsx)(p,{file:n,isImporting:t,onImport:b,onCancel:v}),l&&(0,r.jsx)(g,{result:l,onReset:v}),!l&&(0,r.jsx)(j,{})]})]})})}var v=s(89099),w=s(97730);function k(e){let{onImport:t,onExport:s,clientCount:a}=e,l=(0,v.useRouter)();return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Client Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your client relationships and information"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,r.jsxs)("button",{onClick:s,disabled:0===a,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,r.jsxs)("button",{onClick:()=>l.push("/app/clients/new"),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Add Client"]})]})]})}var A=s(9674),C=s(50843),I=s(66042);function E(e){let t,{summary:s}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Clients"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s.totalClients})]}),(0,r.jsx)(d.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Active Clients"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-green-600",children:s.activeClients})]}),(0,r.jsx)(A.A,{className:"h-8 w-8 text-green-500"})]})}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Projects"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s.totalProjects||0})]}),(0,r.jsx)(C.A,{className:"h-8 w-8 text-orange-500"})]})}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Value"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(t=s.totalProjectValue,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))})]}),(0,r.jsx)(I.A,{className:"h-8 w-8 text-purple-500"})]})}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"High Priority"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-red-600",children:s.highPriorityClients||0})]}),(0,r.jsx)(y.A,{className:"h-8 w-8 text-red-500"})]})})]})}var S=s(57009),M=s(52958),L=s(30359),D=s(58875),T=s(36535),P=s(10665);function R(e){let t,{client:s,onDelete:a}=e,l=(0,v.useRouter)();return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center text-lg",children:(e=>{switch(e){case P.gI.ENTERPRISE:return"\uD83C\uDFE2";case P.gI.SME:return"\uD83C\uDFEA";case P.gI.RESIDENTIAL:return"\uD83C\uDFE0";case P.gI.GOVERNMENT:return"\uD83C\uDFDB️";case P.gI.NON_PROFIT:return"❤️";case P.gI.EDUCATION:return"\uD83C\uDF93";case P.gI.HEALTHCARE:return"\uD83C\uDFE5";default:return"\uD83D\uDCCB"}})(s.category)}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s.industry})]})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:s.contactPerson}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-xs",children:(0,r.jsxs)("a",{href:"mailto:".concat(s.email),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[(0,r.jsx)(S.A,{className:"h-3 w-3"}),s.email]})}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-xs",children:(0,r.jsxs)("a",{href:"tel:".concat(s.phone),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[(0,r.jsx)(M.A,{className:"h-3 w-3"}),s.phone]})})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("p",{className:"text-sm text-gray-900",children:s.category.replace("_"," ").charAt(0).toUpperCase()+s.category.slice(1)})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case P.S2.ACTIVE:return"bg-green-100 text-green-800";case P.S2.INACTIVE:return"bg-gray-100 text-gray-800";case P.S2.PROSPECT:return"bg-blue-100 text-blue-800";case P.S2.CHURNED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(s.status)),children:s.status})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case P.wq.VIP:return"bg-purple-100 text-purple-800";case P.wq.CRITICAL:return"bg-red-100 text-red-800";case P.wq.HIGH:return"bg-orange-100 text-orange-800";case P.wq.MEDIUM:return"bg-yellow-100 text-yellow-800";case P.wq.LOW:default:return"bg-gray-100 text-gray-800"}})(s.priority)),children:s.priority})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("p",{className:"text-gray-900",children:[s.activeProjects," active"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[s.totalProjects," total"]})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("p",{className:"text-gray-900 font-medium",children:(t=s.totalProjectValue||0,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:s.paymentTerms?s.paymentTerms.replace("_"," "):"Net 30"})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>l.push("/app/clients/".concat(s.id)),className:"p-1 text-gray-400 hover:text-blue-600",title:"View",children:(0,r.jsx)(L.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>l.push("/app/clients/".concat(s.id,"/edit")),className:"p-1 text-gray-400 hover:text-blue-600",title:"Edit",children:(0,r.jsx)(D.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>a(s.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:(0,r.jsx)(T.A,{className:"h-4 w-4"})})]})})]})}function F(e){let{clients:t,isLoading:s,error:a,onDelete:l}=e;return(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projects"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[s&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"Loading clients..."})}),a&&(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{colSpan:8,className:"px-4 py-8 text-center text-red-600",children:["Error loading clients: ",a.message]})}),t&&0===t.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No clients found"})}),null==t?void 0:t.map(e=>(0,r.jsx)(R,{client:e,onDelete:l},e.id))]})]})})})}function q(){let[e,t]=(0,a.useState)(""),[s,d]=(0,a.useState)(!1),[o,x]=(0,a.useState)({}),[m,h]=(0,a.useState)(!1),{data:p,isLoading:u,error:y,refetch:g}=(0,l.I)({queryKey:["clients",o],queryFn:()=>c.L.getAll(o)}),{data:j}=(0,l.I)({queryKey:["client-summary"],queryFn:()=>c.L.getClientSummary()}),b=async e=>{if(confirm("Are you sure you want to delete this client? This action cannot be undone."))try{await c.L.delete(e),g()}catch(e){alert(e.message||"Failed to delete client")}},f=async()=>{try{let e=await c.L.export.exportToExcel(p),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="clients_export_".concat(new Date().toISOString().split("T")[0],".xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)}catch(e){alert("Failed to export client data")}};return s?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("button",{onClick:()=>{d(!1),g()},className:"text-blue-600 hover:text-blue-800",children:"← Back to Client List"})}),(0,r.jsx)(N,{})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(k,{onImport:()=>d(!0),onExport:f,clientCount:(null==p?void 0:p.length)||0}),j&&(0,r.jsx)(E,{summary:j}),(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-white p-4 rounded-lg border border-gray-200",children:[(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),x(t=>({...t,searchTerm:e}))},className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search clients...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,r.jsxs)("button",{onClick:()=>h(!m),className:"flex items-center gap-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),"Filters"]})]}),(0,r.jsx)(F,{clients:p,isLoading:u,error:y,onDelete:b})]})}},97730:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},97842:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);