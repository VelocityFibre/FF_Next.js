"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4076],{18024:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},21271:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30155:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},30359:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},36535:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},46618:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},54076:(e,t,r)=>{r.r(t),r.d(t,{ProjectList:()=>C});var s=r(37876),a=r(14232),c=r(17734),l=r(59452),i=r(95365),n=r(16932),o=r(30155),d=r(46618),x=r(97730),h=r(89099);function m(e){let{onImport:t,onExport:r,projectCount:a=0}=e,c=(0,h.useRouter)();return(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your fibre installation projects"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,s.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),"Import"]}),r&&a>0&&(0,s.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),"Export"]}),(0,s.jsxs)("button",{onClick:()=>c.push("/projects/create"),className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),"Add Project"]})]})]})})}var p=r(49249),y=r(50843),g=r(30449),u=r(18024),j=r(66042),b=r(21271);function f(e){let t,{summary:r,projects:a=[]}=e,c=r||{totalProjects:a.length,activeProjects:a.filter(e=>"IN_PROGRESS"===e.status||"ACTIVE"===e.status).length,completedProjects:a.filter(e=>"COMPLETED"===e.status).length,totalBudget:a.reduce((e,t)=>e+(Number(t.budget_allocated)||0),0),onHoldProjects:a.filter(e=>"ON_HOLD"===e.status).length,highPriorityProjects:a.filter(e=>"HIGH"===e.priority||"CRITICAL"===e.priority).length};return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Projects"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.totalProjects})]}),(0,s.jsx)(p.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.activeProjects})]}),(0,s.jsx)(y.A,{className:"h-8 w-8 text-green-500"})]})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Completed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.completedProjects})]}),(0,s.jsx)(g.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"On Hold"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.onHoldProjects})]}),(0,s.jsx)(u.A,{className:"h-8 w-8 text-yellow-500"})]})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Budget"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(t=c.totalBudget,new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0))})]}),(0,s.jsx)(j.A,{className:"h-8 w-8 text-purple-500"})]})}),(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"High Priority"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.highPriorityProjects})]}),(0,s.jsx)(b.A,{className:"h-8 w-8 text-red-500"})]})})]})}var N=r(80192),w=r(30359),v=r(58875),k=r(36535);function A(e){let{projects:t,isLoading:r,error:c,onDelete:l}=e,i=(0,h.useRouter)(),[n,o]=(0,a.useState)(null),d=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A";return(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[r&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"Loading projects..."})}),c&&(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:8,className:"px-4 py-8 text-center text-red-600",children:["Error loading projects: ",c.message]})}),t&&0===t.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No projects found"})}),null==t?void 0:t.map(e=>{var t;let r;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>i.push("/projects/".concat(e.id)),children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.code||"PRJ-".concat(e.id.slice(0,6))})]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.client_name||"N/A"})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[e.city,", ",e.state]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(e=>{let t=null==e?void 0:e.replace("_"," ");return(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat({PLANNING:"bg-blue-100 text-blue-800",IN_PROGRESS:"bg-green-100 text-green-800",ON_HOLD:"bg-yellow-100 text-yellow-800",COMPLETED:"bg-gray-100 text-gray-800",CANCELLED:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:t})})(e.status)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(t=e.priority,(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat({LOW:"bg-gray-100 text-gray-800",MEDIUM:"bg-yellow-100 text-yellow-800",HIGH:"bg-orange-100 text-orange-800",CRITICAL:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"),children:null==t?void 0:t.toLowerCase()}))}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[d(e.start_date)," - ",d(e.end_date)]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(r=Number(e.budget_allocated),new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r||0))})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:()=>o(n===e.id?null:e.id),className:"text-gray-400 hover:text-gray-600 p-1",children:(0,s.jsx)(N.A,{className:"h-4 w-4"})}),n===e.id&&(0,s.jsxs)("div",{className:"absolute right-0 top-8 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[(0,s.jsxs)("button",{onClick:()=>i.push("/projects/".concat(e.id)),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,s.jsxs)("button",{onClick:()=>i.push("/projects/".concat(e.id,"/edit")),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),l&&(0,s.jsxs)("button",{onClick:()=>l(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center",children:[(0,s.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id)})]})]})})})}function C(){let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)(!1),[d,x]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),{projects:y,loading:g,error:u}=function(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[c,l]=(0,a.useState)(null),o=async()=>{try{s(!0);let e=await i.Q.getAll();t(e),l(null)}catch(e){l("Failed to fetch projects"),n.Rm.error("Error fetching projects:",{data:e},"useNeonProjects")}finally{s(!1)}};return(0,a.useEffect)(()=>{o()},[]),{projects:e,loading:r,error:c,refetch:o}}(),j=y.filter(t=>{var r,s,a;let c=!e||(null==(r=t.name)?void 0:r.toLowerCase().includes(e.toLowerCase()))||(null==(s=t.client_name)?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null==(a=t.city)?void 0:a.toLowerCase().includes(e.toLowerCase())),l=0===d.length||d.includes(t.status),i=0===h.length||h.includes(t.priority);return c&&l&&i}),b=async e=>{if(!confirm("Are you sure you want to delete this project? This action cannot be undone."))return},N=async()=>{alert("Export functionality coming soon")};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(m,{onExport:N,projectCount:j.length}),(0,s.jsx)(f,{projects:y}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault()},className:"flex-1 max-w-md",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search projects...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,s.jsxs)("button",{onClick:()=>o(!r),className:"flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors ".concat(r||d.length>0||h.length>0?"bg-blue-50 text-blue-700 border-blue-200":"text-gray-600 border-gray-300 hover:bg-gray-50"),children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),"Filters",(d.length>0||h.length>0)&&(0,s.jsx)("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-0.5",children:d.length+h.length})]})]}),r&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,s.jsx)("div",{className:"space-y-2",children:["PLANNING","IN_PROGRESS","ON_HOLD","COMPLETED","CANCELLED"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.includes(e),onChange:t=>{t.target.checked?x([...d,e]):x(d.filter(t=>t!==e))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.replace("_"," ")})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,s.jsx)("div",{className:"space-y-2",children:["LOW","MEDIUM","HIGH","CRITICAL"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:h.includes(e),onChange:t=>{t.target.checked?p([...h,e]):p(h.filter(t=>t!==e))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:e.toLowerCase()})]},e))})]})]}),(d.length>0||h.length>0)&&(0,s.jsx)("div",{className:"mt-4 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{x([]),p([])},className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear all filters"})})]})]}),(0,s.jsx)(A,{projects:j,isLoading:g,error:u?Error(u):null,onDelete:b})]})}},58875:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},59452:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},66042:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},80192:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},95365:(e,t,r)=>{r.d(t,{Q:()=>c});var s=r(16932);class a{async getAll(){try{let e=await fetch(this.baseUrl);if(!e.ok)throw Error("Failed to fetch projects: ".concat(e.statusText));return(await e.json()).projects||[]}catch(e){throw s.Rm.error("Error fetching projects:",e,"ProjectsService"),e}}async getById(e){try{let t=await fetch("".concat(this.baseUrl,"/").concat(e));if(!t.ok){if(404===t.status)return null;throw Error("Failed to fetch project: ".concat(t.statusText))}return(await t.json()).project}catch(e){throw s.Rm.error("Error fetching project by ID:",e,"ProjectsService"),e}}async create(e){try{let t=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create project: ".concat(t.statusText));return(await t.json()).project}catch(e){throw s.Rm.error("Error creating project:",e,"ProjectsService"),e}}async update(e,t){try{let r=await fetch("".concat(this.baseUrl,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to update project: ".concat(r.statusText));return(await r.json()).project}catch(e){throw s.Rm.error("Error updating project:",e,"ProjectsService"),e}}async delete(e){try{let t=await fetch("".concat(this.baseUrl,"/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete project: ".concat(t.statusText))}catch(e){throw s.Rm.error("Error deleting project:",e,"ProjectsService"),e}}async getByClient(e){try{let t=await fetch("".concat(this.baseUrl,"?clientId=").concat(e));if(!t.ok)throw Error("Failed to fetch projects by client: ".concat(t.statusText));return(await t.json()).projects||[]}catch(e){throw s.Rm.error("Error fetching projects by client:",e,"ProjectsService"),e}}async getStats(){try{let e=await fetch("".concat(this.baseUrl,"/stats"));if(!e.ok)throw Error("Failed to fetch project stats: ".concat(e.statusText));return await e.json()}catch(e){throw s.Rm.error("Error fetching project stats:",e,"ProjectsService"),e}}async search(e){try{let t=await fetch("".concat(this.baseUrl,"/search?q=").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to search projects: ".concat(t.statusText));return(await t.json()).projects||[]}catch(e){throw s.Rm.error("Error searching projects:",e,"ProjectsService"),e}}constructor(){this.baseUrl="/api/projects"}}let c=new a},97730:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(56467).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}}]);