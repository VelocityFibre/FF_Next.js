(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4627],{28364:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},36535:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40097:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var r=s(14232),a=s(21407),i=s(60388),l=s(90089),n=s(37149),c=class extends l.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,n.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,n.EN)(t.mutationKey)!==(0,n.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},d=s(67768);function o(e,t){let s=(0,d.jE)(t),[a]=r.useState(()=>new c(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let l=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=r.useCallback((e,t)=>{a.mutate(e,t).catch(n.lQ)},[a]);if(l.error&&(0,n.GU)(a.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:o,mutateAsync:l.mutate}}},52958:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},57009:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},58875:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},59516:(e,t,s)=>{"use strict";s.d(t,{Ak:()=>d,LC:()=>x,_P:()=>m,_c:()=>h,tH:()=>o}),s(14232);var r=s(67914),a=s(67768),i=s(40097),l=s(49711),n=s(16932);let c={all:["clients"],lists:()=>[...c.all,"list"],list:e=>[...c.lists(),{filter:e}],details:()=>[...c.all,"detail"],detail:e=>[...c.details(),e],active:()=>[...c.all,"active"],summary:()=>[...c.all,"summary"],contactHistory:e=>[...c.all,"contactHistory",e]};function d(){return(0,r.I)({queryKey:c.active(),queryFn:()=>l.L.getActiveClients(),staleTime:6e5})}function o(e){return(0,r.I)({queryKey:c.detail(e),queryFn:()=>l.L.getById(e),enabled:!!e})}function x(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>l.L.create(e),onSuccess:()=>{e.invalidateQueries({queryKey:c.all})},onError:e=>{throw n.Rm.error("Failed to create client:",{data:e},"useClients"),e}})}function m(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>{let{id:t,data:s}=e;return l.L.update(t,s)},onSuccess:(t,s)=>{let{id:r}=s;e.invalidateQueries({queryKey:c.detail(r)}),e.invalidateQueries({queryKey:c.lists()}),e.invalidateQueries({queryKey:c.active()}),e.invalidateQueries({queryKey:c.summary()})},onError:e=>{throw n.Rm.error("Failed to update client:",{data:e},"useClients"),e}})}function h(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>l.L.delete(e),onSuccess:(t,s)=>{e.removeQueries({queryKey:c.detail(s)}),e.invalidateQueries({queryKey:c.lists()}),e.invalidateQueries({queryKey:c.active()}),e.invalidateQueries({queryKey:c.summary()})},onError:e=>{throw n.Rm.error("Failed to delete client:",{data:e},"useClients"),e}})}},59938:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},75375:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},79039:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]])},79890:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},79992:(e,t,s)=>{"use strict";s.d(t,{kt:()=>n});var r=s(37876),a=s(98960);let i={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},l={primary:"text-primary-600",secondary:"text-[var(--ff-text-secondary)]",white:"text-white",success:"text-success-600",warning:"text-warning-600",error:"text-error-600"};function n(e){let{size:t="md",variant:s="primary",className:n="",label:c="Loading..."}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex items-center justify-center",n),children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsxs)("svg",{className:(0,a.cn)("animate-spin",i[t],l[s]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",role:"status","aria-label":c,children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c&&"sm"!==t&&(0,r.jsx)("span",{className:"text-sm text-[var(--ff-text-secondary)]",children:c}),(0,r.jsx)("span",{className:"sr-only",children:c})]})})}},89099:(e,t,s)=>{e.exports=s(6763)},89183:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(56467).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},94627:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ClientDetail:()=>L});var r=s(37876),a=s(14232),i=s(89099),l=s(59938),n=s(75375),c=s(58875),d=s(36535),o=s(28364),x=s(89183),m=s(59516),h=s(79992),u=s(57009),p=s(52958),y=s(79039),g=s(79890);let j=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),b=e=>e.replace("_"," ").toUpperCase();function v(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600",children:t.industry})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"prospect":return"bg-blue-100 text-blue-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"former":return"bg-orange-100 text-orange-800"}})(t.status)),children:t.status.toUpperCase()}),(0,r.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"vip":return"bg-purple-100 text-purple-800";case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(t.priority)),children:t.priority.toUpperCase()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.A,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Primary Email"}),(0,r.jsx)("a",{href:"mailto:".concat(t.email),className:"text-blue-600 hover:underline",children:t.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(p.A,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Primary Phone"}),(0,r.jsx)("a",{href:"tel:".concat(t.phone),className:"text-blue-600 hover:underline",children:t.phone})]})]}),t.website&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(y.A,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Website"}),(0,r.jsx)("a",{href:t.website.startsWith("http")?t.website:"https://".concat(t.website),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:t.website})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Location"}),(0,r.jsxs)("p",{className:"text-gray-900",children:[t.city,", ",t.province]})]})]})]})]})}function N(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Contact Person"}),(0,r.jsx)("p",{className:"font-medium",children:t.contactPerson})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Primary Email"}),(0,r.jsx)("a",{href:"mailto:".concat(t.email),className:"text-blue-600 hover:underline",children:t.email})]}),t.alternativeEmail&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Alternative Email"}),(0,r.jsx)("a",{href:"mailto:".concat(t.alternativeEmail),className:"text-blue-600 hover:underline",children:t.alternativeEmail})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Primary Phone"}),(0,r.jsx)("a",{href:"tel:".concat(t.phone),className:"text-blue-600 hover:underline",children:t.phone})]}),t.alternativePhone&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Alternative Phone"}),(0,r.jsx)("a",{href:"tel:".concat(t.alternativePhone),className:"text-blue-600 hover:underline",children:t.alternativePhone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Communication Preferences"}),(0,r.jsxs)("p",{className:"font-medium",children:[b(t.preferredContactMethod)," • ",t.communicationLanguage]})]})]})]})}function f(e){let t,{client:s}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.registrationNumber&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Registration Number"}),(0,r.jsx)("p",{className:"font-medium",children:s.registrationNumber})]}),s.vatNumber&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"VAT Number"}),(0,r.jsx)("p",{className:"font-medium",children:s.vatNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Category"}),(0,r.jsx)("p",{className:"font-medium",children:(t=s.category).replace("_"," ").charAt(0).toUpperCase()+t.slice(1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Industry"}),(0,r.jsx)("p",{className:"font-medium",children:s.industry})]})]})]})}function w(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-gray-900",children:t.address}),(0,r.jsxs)("p",{className:"text-gray-900",children:[t.city,", ",t.province," ",t.postalCode]}),(0,r.jsx)("p",{className:"text-gray-900",children:t.country})]})]})}function k(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Financial Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Credit Limit"}),(0,r.jsx)("p",{className:"font-medium text-lg",children:j(t.creditLimit)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Current Balance"}),(0,r.jsx)("p",{className:"font-medium text-lg",children:j(t.currentBalance)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Terms"}),(0,r.jsx)("p",{className:"font-medium",children:b(t.paymentTerms)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Credit Rating"}),(0,r.jsx)("p",{className:"font-medium ".concat((e=>{switch(e){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"fair":return"text-yellow-600";case"poor":return"text-red-600";default:return"text-gray-600"}})(t.creditRating)),children:t.creditRating.charAt(0).toUpperCase()+t.creditRating.slice(1)})]})]})]})}function C(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:t.activeProjects}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Active Projects"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:t.completedProjects}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Completed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-600",children:t.totalProjects}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Projects"})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Project Value"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:j(t.totalProjectValue)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Average Project Value"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:j(t.averageProjectValue)})]})]})})]})}function A(e){let{client:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Types"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.serviceTypes.map(e=>(0,r.jsx)("span",{className:"px-3 py-1 text-sm font-medium bg-blue-100 text-blue-800 rounded-full",children:e.toUpperCase()},e))}),t.specialRequirements&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Special Requirements"}),(0,r.jsx)("p",{className:"text-gray-900",children:t.specialRequirements})]})]})}function M(e){let{client:t}=e;return t.notes||t.tags&&0!==t.tags.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),t.tags&&t.tags.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:e},e))})]}),t.notes&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Notes"}),(0,r.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:t.notes})]})]}):null}var P=s(9753),E=s(26664),R=s(16932);function L(){let e=(0,i.useRouter)(),{id:t}=e.query,{hasPermission:s}=(0,P.A)(),{data:u,isLoading:p,error:y}=(0,m.tH)(t||""),g=(0,m._c)(),[j,b]=(0,a.useState)(!1),[L,q]=(0,a.useState)("overview"),O=async()=>{if(t)try{await g.mutateAsync(t),e.push("/app/clients")}catch(e){R.Rm.error("Failed to delete client:",{data:e},"ClientDetail")}};return p?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)(h.kt,{size:"lg",label:"Loading client..."})}):y||!u?(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,r.jsx)(l.A,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Client not found"}),(0,r.jsx)("button",{onClick:()=>e.push("/app/clients"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Back to Client List"})]})}):(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:()=>e.push("/app/clients"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-1"}),"Back to Client List"]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)(v,{client:u})]}),s(E.aX.CLIENTS_UPDATE)&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/app/clients/".concat(t,"/edit")),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Edit"]}),s(E.aX.CLIENTS_DELETE)&&(0,r.jsx)("button",{onClick:()=>b(!0),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,r.jsx)(d.A,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex space-x-1 border-b border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>q("overview"),className:"px-4 py-2 font-medium text-sm ".concat("overview"===L?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:"Overview"}),(0,r.jsxs)("button",{onClick:()=>q("projects"),className:"px-4 py-2 font-medium text-sm flex items-center gap-2 ".concat("projects"===L?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Projects (",u.totalProjects,")"]}),(0,r.jsxs)("button",{onClick:()=>q("history"),className:"px-4 py-2 font-medium text-sm flex items-center gap-2 ".concat("history"===L?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Contact History"]})]})]})}),"overview"===L&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsx)(N,{client:u}),(0,r.jsx)(f,{client:u}),(0,r.jsx)(w,{client:u}),(0,r.jsx)(A,{client:u}),(0,r.jsx)(M,{client:u})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(k,{client:u}),(0,r.jsx)(C,{client:u})]})]}),"projects"===L&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Client Projects"}),s(E.aX.PROJECTS_CREATE)&&(0,r.jsx)("button",{onClick:()=>e.push("/app/projects/new?clientId=".concat(t)),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"New Project"})]}),u.totalProjects>0?(0,r.jsxs)("div",{className:"text-gray-600",children:[(0,r.jsxs)("p",{className:"mb-4",children:["This client has ",u.activeProjects," active project",1!==u.activeProjects?"s":""," and "," ",u.completedProjects," completed project",1!==u.completedProjects?"s":"","."]}),(0,r.jsx)("button",{onClick:()=>e.push("/app/projects?clientId=".concat(t)),className:"text-blue-600 hover:text-blue-700 font-medium",children:"View All Projects →"})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"No projects found for this client."})]}),"history"===L&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact History"}),(0,r.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Add Contact"})]}),(0,r.jsx)("p",{className:"text-gray-500",children:"Contact history feature coming soon."})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Client?"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',u.name,'"? This action cannot be undone and will remove all associated data.']}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:O,disabled:g.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",children:g.isPending?"Deleting...":"Delete Client"})]})]})})]})}},98960:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(69241),a=s(29573);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}}]);