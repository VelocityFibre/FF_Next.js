"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4237],{28729:(t,e,r)=>{r.d(e,{F:()=>c});var a=r(65078);class c{static async getAllProjects(t){return a.S.getAllProjects(t)}static async getProjectById(t){return a.S.getProjectById(t)}static async getProjectsByClient(t){return a.S.getProjectsByClient(t)}static async getProjectsByStatus(t){return a.S.getProjectsByStatus(t)}static async searchProjects(t){return a.S.searchProjects(t)}static async getActiveProjects(){return a.S.getActiveProjects()}static async getProjectsPaginated(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,c=await a.S.getAllProjects(r);return{projects:c.slice(e,e+t),total:c.length}}}},37683:(t,e,r)=>{r.d(e,{ko:()=>n,bx:()=>c,Ks:()=>a,e1:()=>s});var a=function(t){return t.PLANNING="planning",t.ACTIVE="active",t.ON_HOLD="on_hold",t.COMPLETED="completed",t.CANCELLED="cancelled",t}({}),c=function(t){return t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t}({}),o=function(t){return t.PLANNING="planning",t.DESIGN="design",t.PROCUREMENT="procurement",t.CONSTRUCTION="construction",t.TESTING="testing",t.COMMISSIONING="commissioning",t.HANDOVER="handover",t.MAINTENANCE="maintenance",t}({}),n=function(t){return t.NOT_STARTED="not_started",t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.ON_HOLD="on_hold",t.CANCELLED="cancelled",t}({}),s=function(t){return t.NOT_STARTED="not_started",t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.BLOCKED="blocked",t.CANCELLED="cancelled",t.DEFERRED="deferred",t}({});o.PLANNING,o.DESIGN,o.PROCUREMENT,o.CONSTRUCTION,o.TESTING,o.HANDOVER},65078:(t,e,r)=>{r.d(e,{S:()=>o});var a=r(16932);let c="/api",o={async getAllProjects(t){try{let e="".concat(c,"/projects"),r=new URLSearchParams;t&&(t.status&&r.append("status",t.status),t.clientId&&r.append("clientId",t.clientId)),r.toString()&&(e+="?".concat(r.toString()));let a=await fetch(e);if(!a.ok)throw Error("Failed to fetch projects: ".concat(a.status));return(await a.json()).data||[]}catch(t){throw a.Rm.error("Error fetching projects:",{error:t},"projectApi"),t}},async getProjectById(t){try{let e=await fetch("".concat(c,"/projects?id=").concat(t));if(!e.ok)throw Error("Failed to fetch project: ".concat(e.status));return(await e.json()).data||null}catch(e){throw a.Rm.error("Error fetching project by ID:",{error:e,id:t},"projectApi"),e}},async getProjectsByClient(t){try{let e=await fetch("".concat(c,"/projects?clientId=").concat(t));if(!e.ok)throw Error("Failed to fetch projects by client: ".concat(e.status));return(await e.json()).data||[]}catch(e){return a.Rm.error("Error fetching projects by client:",{error:e,clientId:t},"projectApi"),[]}},async getProjectsByStatus(t){try{let e=await fetch("".concat(c,"/projects?status=").concat(t));if(!e.ok)throw Error("Failed to fetch projects by status: ".concat(e.status));return(await e.json()).data||[]}catch(e){return a.Rm.error("Error fetching projects by status:",{error:e,status:t},"projectApi"),[]}},async searchProjects(t){try{let e=await fetch("".concat(c,"/projects?search=").concat(encodeURIComponent(t)));if(!e.ok)throw Error("Failed to search projects: ".concat(e.status));return(await e.json()).data||[]}catch(e){return a.Rm.error("Error searching projects:",{error:e,searchTerm:t},"projectApi"),[]}},async getActiveProjects(){try{let t=await fetch("".concat(c,"/projects"));if(!t.ok)throw Error("Failed to fetch active projects: ".concat(t.status));return((await t.json()).data||[]).map(t=>({...t,id:t.id,name:t.project_name||t.name,code:t.project_code||t.code,clientId:t.client_id||t.clientId,clientName:t.client_name||t.clientName,projectType:t.project_type||t.projectType,startDate:t.start_date||t.startDate,endDate:t.end_date||t.endDate,projectManager:t.project_manager||t.projectManager,description:t.description,status:t.status})).filter(t=>{var e;return!["completed","archived","cancelled","on_hold"].includes((null==(e=t.status)?void 0:e.toLowerCase())||"")})}catch(t){return a.Rm.error("Error fetching active projects:",{error:t},"projectApi"),[]}},async createProject(t){try{var e;let r=await fetch("".concat(c,"/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_code:t.code,project_name:t.name,client_id:t.clientId,description:t.description,project_type:t.projectType,status:t.status||"PLANNING",priority:t.priority||"MEDIUM",start_date:t.startDate,end_date:t.endDate,budget:t.budget,project_manager:t.projectManagerId,location:t.location})});if(!r.ok)throw Error("Failed to create project: ".concat(r.status));return(null==(e=(await r.json()).data)?void 0:e.id)||""}catch(e){throw a.Rm.error("Error creating project:",{error:e,data:t},"projectApi"),e}},async updateProject(t,e){try{let r=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_name:e.name,project_code:e.code,client_id:e.clientId,description:e.description,project_type:e.projectType,status:e.status,priority:e.priority,start_date:e.startDate,end_date:e.endDate,budget:e.budget,project_manager:e.projectManagerId,location:e.location})});if(!r.ok)throw Error("Failed to update project: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project:",{error:r,id:t,data:e},"projectApi"),r}},async deleteProject(t){try{let e=await fetch("".concat(c,"/projects?id=").concat(t),{method:"DELETE"});if(!e.ok)throw Error("Failed to delete project: ".concat(e.status))}catch(e){throw a.Rm.error("Error deleting project:",{error:e,id:t},"projectApi"),e}},async updateProjectStatus(t,e){try{let r=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})});if(!r.ok)throw Error("Failed to update project status: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project status:",{error:r,id:t,status:e},"projectApi"),r}},async updateProjectProgress(t,e){try{let r=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({progress:e})});if(!r.ok)throw Error("Failed to update project progress: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project progress:",{error:r,id:t,progress:e},"projectApi"),r}},async updateProjectBudget(t,e){try{let r=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({budget:e})});if(!r.ok)throw Error("Failed to update project budget: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project budget:",{error:r,id:t,budget:e},"projectApi"),r}},async assignProjectToClient(t,e){try{let r=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:e})});if(!r.ok)throw Error("Failed to assign project to client: ".concat(r.status))}catch(r){throw a.Rm.error("Error assigning project to client:",{error:r,projectId:t,clientId:e},"projectApi"),r}},async updateProjectDates(t,e,r){try{let a=await fetch("".concat(c,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:e,end_date:r})});if(!a.ok)throw Error("Failed to update project dates: ".concat(a.status))}catch(c){throw a.Rm.error("Error updating project dates:",{error:c,id:t,startDate:e,endDate:r},"projectApi"),c}}}},67242:(t,e,r)=>{r.d(e,{L:()=>c});class a{async fetch(t,e){try{let r=await fetch("/api".concat(t),{...e,headers:{"Content-Type":"application/json",...null==e?void 0:e.headers}});if(!r.ok)throw Error("API request failed: ".concat(r.status," ").concat(r.statusText));let a=await r.json();if(!a.success)throw Error(a.error||"API request failed");return a.data||a}catch(e){throw console.error("Analytics API error (".concat(t,"):"),e),e}}async getDashboardStats(t){let e=new URLSearchParams;return(null==t?void 0:t.startDate)&&e.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&e.append("endDate",t.endDate),this.fetch("/analytics/dashboard/stats?".concat(e))}async getDashboardSummary(t){let e=new URLSearchParams({period:t.type});return this.fetch("/analytics/dashboard/summary?".concat(e))}async getDashboardTrends(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"month",a=new URLSearchParams({startDate:t,endDate:e,groupBy:r});return this.fetch("/analytics/dashboard/trends?".concat(a))}async getProjectSummary(t){let e=new URLSearchParams;return t&&e.append("projectId",t),this.fetch("/analytics/projects/summary?".concat(e))}async getProjectPerformance(t,e){let r=new URLSearchParams({projectId:t,metrics:e.join(",")});return this.fetch("/analytics/projects/performance?".concat(r))}async getProjectTrends(t,e){let r=new URLSearchParams({projectId:t,period:e.type,...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate}});return this.fetch("/analytics/projects/trends?".concat(r))}async compareProjects(t,e){return this.fetch("/analytics/projects/comparison",{method:"POST",body:JSON.stringify({projectIds:t,metrics:e})})}async getKPIs(t){let e=new URLSearchParams;return t&&e.append("category",t),this.fetch("/analytics/kpis?".concat(e))}async calculateKPIs(t,e){return this.fetch("/analytics/kpis/calculate",{method:"POST",body:JSON.stringify({kpiIds:t,parameters:e})})}async getKPITargets(){return this.fetch("/analytics/kpis/targets")}async setKPITargets(t){return this.fetch("/analytics/kpis/targets",{method:"POST",body:JSON.stringify({targets:t})})}async getStaffStatistics(t){let e=new URLSearchParams;return t&&e.append("filters",JSON.stringify(t)),this.fetch("/analytics/staff/statistics?".concat(e))}async getStaffPerformance(t,e){let r=new URLSearchParams;return t&&r.append("staffId",t),e&&r.append("period",e.type),this.fetch("/analytics/staff/performance?".concat(r))}async getStaffTrends(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=new URLSearchParams({months:e.toString()});return t&&r.append("department",t),this.fetch("/analytics/staff/trends?".concat(r))}async getTeamAnalytics(t){let e=new URLSearchParams;return t&&e.append("teamId",t),this.fetch("/analytics/staff/teams?".concat(e))}async getUtilizationRates(t,e){let r=new URLSearchParams({period:t.type});return e&&r.append("department",e),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),this.fetch("/analytics/staff/utilization?".concat(r))}async getFinancialSummary(t,e,r){let a=new URLSearchParams({period:t.type});return e&&a.append("projectId",e),r&&a.append("clientId",r),this.fetch("/analytics/financial/summary?".concat(a))}async getBudgetAnalysis(t,e,r){let a=new URLSearchParams;return t&&a.append("projectId",t),e&&a.append("clientId",e),r&&a.append("department",r),this.fetch("/analytics/financial/budgets?".concat(a))}async generateReport(t,e){return this.fetch("/analytics/reports/generate",{method:"POST",body:JSON.stringify({reportType:t,parameters:e})})}}let c=new a},87212:(t,e,r)=>{r.d(e,{bL:()=>E,eW:()=>S,By:()=>P,Ww:()=>w}),r(14232);var a=r(67914),c=r(67768),o=r(40097),n=r(28729),s=r(65078),i=r(28888),d=r(67242),p=r(16932);let l="/api";async function u(t){if(!t.ok)throw Error((await t.json().catch(()=>({message:"Request failed"}))).message||"HTTP ".concat(t.status));let e=await t.json();return e.data||e}function y(t){return{id:t.id,projectCode:t.project_code,projectName:t.project_name,name:t.project_name,clientId:t.client_id,projectType:t.project_type,status:t.status,priority:t.priority,startDate:t.start_date,endDate:t.end_date,budget:t.budget,description:t.description,projectManager:t.project_manager,teamLead:t.team_lead,location:t.location,progressPercentage:t.progress_percentage||0,created_at:t.created_at,updated_at:t.updated_at}}function h(t){return{id:t.id,project_code:t.projectCode,project_name:t.projectName||t.name,client_id:t.clientId,project_type:t.projectType,status:t.status,priority:t.priority,start_date:t.startDate,end_date:t.endDate,budget:t.budget,description:t.description,project_manager:t.projectManager,team_lead:t.teamLead,location:t.location,progress_percentage:t.progressPercentage}}let j={async getAll(){let t=await fetch("".concat(l,"/projects"));return(await u(t)).map(y)},async getById(t){let e=await fetch("".concat(l,"/projects?id=").concat(t)),r=await u(e);return r?y(r):null},async create(t){let e=h(t),r=await fetch("".concat(l,"/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return y(await u(r))},async update(t,e){let r=h(e),a=await fetch("".concat(l,"/projects?id=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return y(await u(a))},delete:async t=>u(await fetch("".concat(l,"/projects?id=").concat(t),{method:"DELETE"})),async getActiveProjects(){return(await this.getAll()).filter(t=>"active"===t.status||"in_progress"===t.status)},async getProjectsByClient(t){return(await this.getAll()).filter(e=>e.clientId===t)},async getProjectSummary(){let t=await this.getAll();return{totalProjects:t.length,activeProjects:t.filter(t=>"active"===t.status||"in_progress"===t.status).length,completedProjects:t.filter(t=>"completed"===t.status).length,totalBudget:t.reduce((t,e)=>t+(e.budget||0),0)}}};r(37683);async function g(t){await j.delete(t)}let f={getById:async function(t){return j.getById(t)},create:async function(t){return(await j.create(t)).id||""},delete:g},m={all:["projects"],lists:()=>[...m.all,"list"],list:t=>[...m.lists(),t],details:()=>[...m.all,"detail"],detail:t=>[...m.details(),t],hierarchy:t=>[...m.all,"hierarchy",t],summary:()=>[...m.all,"summary"]};function P(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.I)({queryKey:m.detail(t),queryFn:()=>f.getById(t),enabled:!!t&&e,staleTime:3e5,gcTime:6e5})}function w(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.I)({queryKey:m.hierarchy(t),queryFn:async()=>{let e=await f.getById(t);return e?{project:e,phases:[]}:null},enabled:!!t&&e,staleTime:12e4,gcTime:3e5})}function E(){let t=(0,c.jE)();return(0,o.n)({mutationFn:t=>f.create(t),onSuccess:()=>{t.invalidateQueries({queryKey:m.lists()}),t.invalidateQueries({queryKey:m.summary()})},onError:t=>{p.Rm.error("Failed to create project:",{data:t},"useProjects")}})}function S(){let t=(0,c.jE)();return(0,o.n)({mutationFn:t=>f.delete(t),onSuccess:(e,r)=>{t.removeQueries({queryKey:m.detail(r)}),t.removeQueries({queryKey:m.hierarchy(r)}),t.invalidateQueries({queryKey:m.lists()}),t.invalidateQueries({queryKey:m.summary()})},onError:t=>{p.Rm.error("Failed to delete project:",{data:t},"useProjects")}})}},98960:(t,e,r)=>{r.d(e,{cn:()=>o});var a=r(69241),c=r(29573);function o(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,c.QP)((0,a.$)(e))}}}]);