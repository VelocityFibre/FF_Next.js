"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5722],{18024:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19264:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},21271:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},21744:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},28729:(e,t,r)=>{r.d(t,{F:()=>s});var a=r(65078);class s{static async getAllProjects(e){return a.S.getAllProjects(e)}static async getProjectById(e){return a.S.getProjectById(e)}static async getProjectsByClient(e){return a.S.getProjectsByClient(e)}static async getProjectsByStatus(e){return a.S.getProjectsByStatus(e)}static async searchProjects(e){return a.S.searchProjects(e)}static async getActiveProjects(){return a.S.getActiveProjects()}static async getProjectsPaginated(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,s=await a.S.getAllProjects(r);return{projects:s.slice(t,t+e),total:s.length}}}},28888:(e,t,r)=>{r.d(t,{_:()=>a});function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},35711:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},41458:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},42743:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},65078:(e,t,r)=>{r.d(t,{S:()=>c});var a=r(16932);let s="/api",c={async getAllProjects(e){try{let t="".concat(s,"/projects"),r=new URLSearchParams;e&&(e.status&&r.append("status",e.status),e.clientId&&r.append("clientId",e.clientId)),r.toString()&&(t+="?".concat(r.toString()));let a=await fetch(t);if(!a.ok)throw Error("Failed to fetch projects: ".concat(a.status));return(await a.json()).data||[]}catch(e){throw a.Rm.error("Error fetching projects:",{error:e},"projectApi"),e}},async getProjectById(e){try{let t=await fetch("".concat(s,"/projects?id=").concat(e));if(!t.ok)throw Error("Failed to fetch project: ".concat(t.status));return(await t.json()).data||null}catch(t){throw a.Rm.error("Error fetching project by ID:",{error:t,id:e},"projectApi"),t}},async getProjectsByClient(e){try{let t=await fetch("".concat(s,"/projects?clientId=").concat(e));if(!t.ok)throw Error("Failed to fetch projects by client: ".concat(t.status));return(await t.json()).data||[]}catch(t){return a.Rm.error("Error fetching projects by client:",{error:t,clientId:e},"projectApi"),[]}},async getProjectsByStatus(e){try{let t=await fetch("".concat(s,"/projects?status=").concat(e));if(!t.ok)throw Error("Failed to fetch projects by status: ".concat(t.status));return(await t.json()).data||[]}catch(t){return a.Rm.error("Error fetching projects by status:",{error:t,status:e},"projectApi"),[]}},async searchProjects(e){try{let t=await fetch("".concat(s,"/projects?search=").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to search projects: ".concat(t.status));return(await t.json()).data||[]}catch(t){return a.Rm.error("Error searching projects:",{error:t,searchTerm:e},"projectApi"),[]}},async getActiveProjects(){try{let e=await fetch("".concat(s,"/projects"));if(!e.ok)throw Error("Failed to fetch active projects: ".concat(e.status));return((await e.json()).data||[]).map(e=>({...e,id:e.id,name:e.project_name||e.name,code:e.project_code||e.code,clientId:e.client_id||e.clientId,clientName:e.client_name||e.clientName,projectType:e.project_type||e.projectType,startDate:e.start_date||e.startDate,endDate:e.end_date||e.endDate,projectManager:e.project_manager||e.projectManager,description:e.description,status:e.status})).filter(e=>{var t;return!["completed","archived","cancelled","on_hold"].includes((null==(t=e.status)?void 0:t.toLowerCase())||"")})}catch(e){return a.Rm.error("Error fetching active projects:",{error:e},"projectApi"),[]}},async createProject(e){try{var t;let r=await fetch("".concat(s,"/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_code:e.code,project_name:e.name,client_id:e.clientId,description:e.description,project_type:e.projectType,status:e.status||"PLANNING",priority:e.priority||"MEDIUM",start_date:e.startDate,end_date:e.endDate,budget:e.budget,project_manager:e.projectManagerId,location:e.location})});if(!r.ok)throw Error("Failed to create project: ".concat(r.status));return(null==(t=(await r.json()).data)?void 0:t.id)||""}catch(t){throw a.Rm.error("Error creating project:",{error:t,data:e},"projectApi"),t}},async updateProject(e,t){try{let r=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_name:t.name,project_code:t.code,client_id:t.clientId,description:t.description,project_type:t.projectType,status:t.status,priority:t.priority,start_date:t.startDate,end_date:t.endDate,budget:t.budget,project_manager:t.projectManagerId,location:t.location})});if(!r.ok)throw Error("Failed to update project: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project:",{error:r,id:e,data:t},"projectApi"),r}},async deleteProject(e){try{let t=await fetch("".concat(s,"/projects?id=").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete project: ".concat(t.status))}catch(t){throw a.Rm.error("Error deleting project:",{error:t,id:e},"projectApi"),t}},async updateProjectStatus(e,t){try{let r=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!r.ok)throw Error("Failed to update project status: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project status:",{error:r,id:e,status:t},"projectApi"),r}},async updateProjectProgress(e,t){try{let r=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({progress:t})});if(!r.ok)throw Error("Failed to update project progress: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project progress:",{error:r,id:e,progress:t},"projectApi"),r}},async updateProjectBudget(e,t){try{let r=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({budget:t})});if(!r.ok)throw Error("Failed to update project budget: ".concat(r.status))}catch(r){throw a.Rm.error("Error updating project budget:",{error:r,id:e,budget:t},"projectApi"),r}},async assignProjectToClient(e,t){try{let r=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t})});if(!r.ok)throw Error("Failed to assign project to client: ".concat(r.status))}catch(r){throw a.Rm.error("Error assigning project to client:",{error:r,projectId:e,clientId:t},"projectApi"),r}},async updateProjectDates(e,t,r){try{let a=await fetch("".concat(s,"/projects?id=").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r})});if(!a.ok)throw Error("Failed to update project dates: ".concat(a.status))}catch(s){throw a.Rm.error("Error updating project dates:",{error:s,id:e,startDate:t,endDate:r},"projectApi"),s}}}},66042:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},69756:(e,t,r)=>{r.r(t),r.d(t,{Dashboard:()=>V});var a=r(37876),s=r(49249),c=r(9674),i=r(30449),o=r(66691),n=r(79890),l=r(21744),d=r(50843),p=r(14232),m=r(18024),x=r(98960),u=r(28729),f=r(16932);let h={planning:{label:"Planning",color:"bg-info-100 text-info-800 border-info-200",dot:"bg-info-500"},active:{label:"Active",color:"bg-success-100 text-success-800 border-success-200",dot:"bg-success-500"},on_hold:{label:"On Hold",color:"bg-warning-100 text-warning-800 border-warning-200",dot:"bg-warning-500"},completed:{label:"Completed",color:"bg-neutral-100 text-neutral-800 border-neutral-200",dot:"bg-neutral-500"},cancelled:{label:"Cancelled",color:"bg-error-100 text-error-800 border-error-200",dot:"bg-error-500"}},y={low:{color:"text-success-600",bg:"bg-success-100"},medium:{color:"text-warning-600",bg:"bg-warning-100"},high:{color:"text-error-600",bg:"bg-error-100"},critical:{color:"text-error-700",bg:"bg-error-200"}};function j(e){let{projects:t,isLoading:r=!1,className:i=""}=e,[d,j]=(0,p.useState)("all"),[v,g]=(0,p.useState)(t||[]),[b,N]=(0,p.useState)(r);(0,p.useEffect)(()=>{t?(g(t),N(r)):w()},[t,r]);let w=async()=>{try{N(!0);let e=(await u.F.getAllProjects()).map((e,t)=>{try{var r;let t=e=>e?"string"==typeof e?e:e.toDate&&"function"==typeof e.toDate?e.toDate().toISOString():e.toString():new Date().toISOString();return{id:e.id||"",name:e.name||"Unnamed Project",status:e.status||"planning",progress:Number(e.actualProgress)||0,startDate:t(e.startDate),endDate:t(e.endDate),location:e.location||"Unknown",teamSize:(null==(r=e.teamMembers)?void 0:r.length)||0,priority:e.priority||"low",tasksCompleted:0,totalTasks:0}}catch(r){return f.Rm.error("Error mapping project at index ".concat(t,":"),{data:r,project:e},"ProjectOverviewCard"),{id:(null==e?void 0:e.id)||"error-project-".concat(t),name:(null==e?void 0:e.name)||"Project ".concat(t+1),status:"planning",progress:0,startDate:new Date().toISOString(),endDate:new Date().toISOString(),location:"Unknown",teamSize:0,priority:"low",tasksCompleted:0,totalTasks:0}}});g(e)}catch(e){f.Rm.error("Error loading projects:",{data:e},"ProjectOverviewCard"),g([])}finally{N(!1)}},A=v.filter(e=>"all"===d||e.status===d),k=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return b?(0,a.jsx)("div",{className:(0,x.cn)("bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",i),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-[var(--ff-surface-secondary)] rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-20 bg-[var(--ff-surface-secondary)] rounded"},e))})]})}):(0,a.jsxs)("div",{className:(0,x.cn)("bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",i),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(s.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[var(--ff-text-primary)]",children:"Active Projects"})]}),(0,a.jsx)("div",{className:"flex space-x-1 bg-[var(--ff-surface-secondary)] rounded-lg p-1",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"planning",label:"Planning"}].map(e=>(0,a.jsx)("button",{onClick:()=>j(e.key),className:(0,x.cn)("px-3 py-1 text-sm font-medium rounded-md transition-colors",d===e.key?"bg-[var(--ff-surface-primary)] text-[var(--ff-text-primary)] shadow-sm":"text-[var(--ff-text-secondary)] hover:text-[var(--ff-text-primary)]"),children:e.label},e.key))})]}),(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>{let t=h[e.status]||h.planning,r=y[e.priority]||y.low,s=(e=>{let t=new Date(e),r=new Date;return Math.ceil((t.getTime()-r.getTime())/864e5)})(e.endDate);return(0,a.jsxs)("div",{className:"border border-[var(--ff-border-secondary)] rounded-lg p-4 hover:border-[var(--ff-border-primary)] transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-[var(--ff-text-primary)] truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-[var(--ff-text-tertiary)]",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.location})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c.A,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[e.teamSize," members"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(l.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:k(e.endDate)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:["high"===e.priority||"critical"===e.priority?(0,a.jsx)("div",{className:(0,x.cn)("p-1 rounded",r.bg),children:(0,a.jsx)(o.A,{className:(0,x.cn)("w-3 h-3",r.color)})}):null,(0,a.jsxs)("span",{className:(0,x.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border",t.color),children:[(0,a.jsx)("div",{className:(0,x.cn)("w-1.5 h-1.5 rounded-full mr-1",t.dot)}),t.label]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-[var(--ff-text-secondary)]",children:["Progress: ",e.tasksCompleted,"/",e.totalTasks," tasks"]}),(0,a.jsxs)("span",{className:"font-medium text-[var(--ff-text-primary)]",children:[e.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-[var(--ff-surface-secondary)] rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-[var(--ff-text-tertiary)] mt-2",children:[(0,a.jsxs)("span",{children:["Started ",k(e.startDate)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:s>0?"".concat(s," days remaining"):0===s?"Due today":"".concat(Math.abs(s)," days overdue")})]})]})]})]},e.id)})}),0===A.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(s.A,{className:"w-12 h-12 text-[var(--ff-text-tertiary)] mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-[var(--ff-text-secondary)]",children:0===v.length?"No projects found in database":"No ".concat(d," projects found")}),(0,a.jsx)("p",{className:"text-xs text-[var(--ff-text-tertiary)] mt-1",children:0===v.length?"Projects will appear here when added to the system":"Try selecting a different filter"})]})]})}var v=r(28364),g=r(21271);let b={task_completed:{icon:i.A,color:"text-success-600",bgColor:"bg-success-100"},project_updated:{icon:v.A,color:"text-info-600",bgColor:"bg-info-100"},staff_assigned:{icon:c.A,color:"text-primary-600",bgColor:"bg-primary-100"},issue_reported:{icon:g.A,color:"text-warning-600",bgColor:"bg-warning-100"},milestone_reached:{icon:l.A,color:"text-accent-600",bgColor:"bg-accent-100"}};var N=r(19264);function w(e){let{showAll:t,hasMore:r,onViewAll:s}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[var(--ff-text-primary)]",children:"Recent Activity"})]}),!t&&r&&s&&(0,a.jsxs)("button",{onClick:s,className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center space-x-1",children:[(0,a.jsx)("span",{children:"View All"}),(0,a.jsx)(N.A,{className:"w-3 h-3"})]})]})}function A(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,x.cn)("bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",t),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-[var(--ff-surface-secondary)] rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-[var(--ff-surface-secondary)] rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-[var(--ff-surface-secondary)] rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-[var(--ff-surface-secondary)] rounded w-1/2"})]})]},e))})]})})}function k(){return(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 text-[var(--ff-text-tertiary)] mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-[var(--ff-text-secondary)]",children:"No recent activity"}),(0,a.jsx)("p",{className:"text-xs text-[var(--ff-text-tertiary)] mt-1",children:"Activity tracking will appear here when available"})]})}function P(e){let{activity:t,isLast:r}=e,s=b[t.type],c=s.icon;return(0,a.jsxs)("div",{className:"relative",children:[!r&&(0,a.jsx)("div",{className:"absolute left-4 top-10 w-0.5 h-12 bg-border-secondary"}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",s.bgColor),children:(0,a.jsx)(c,{className:(0,x.cn)("w-4 h-4",s.color)})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-[var(--ff-text-primary)] text-sm",children:t.user.name}),(0,a.jsxs)("span",{className:"text-xs text-[var(--ff-text-tertiary)]",children:["(",t.user.role,")"]})]}),(0,a.jsx)("p",{className:"text-sm text-[var(--ff-text-secondary)] mb-2",children:t.description}),t.project&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 mb-2",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 text-[var(--ff-text-tertiary)]"}),(0,a.jsx)("span",{className:"text-xs text-primary-600 hover:text-primary-700 cursor-pointer",children:t.project})]}),t.metadata&&(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-[var(--ff-text-tertiary)]",children:[t.metadata.location&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:t.metadata.location})]}),t.metadata.progress&&(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsxs)("span",{children:[t.metadata.progress,"% complete"]})}),t.metadata.priority&&(0,a.jsx)("span",{className:(0,x.cn)("px-1.5 py-0.5 rounded text-xs font-medium","critical"===t.metadata.priority?"bg-error-100 text-error-700":"high"===t.metadata.priority?"bg-warning-100 text-warning-700":"bg-info-100 text-info-700"),children:t.metadata.priority.toUpperCase()})]})]}),(0,a.jsx)("div",{className:"text-xs text-[var(--ff-text-tertiary)] ml-4",children:function(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/6e4);if(r<1)return"Just now";if(r<60)return"".concat(r,"m ago");let a=Math.floor(r/60);if(a<24)return"".concat(a,"h ago");let s=Math.floor(a/24);return s<7?"".concat(s,"d ago"):t.toLocaleDateString()}(t.timestamp)})]})})]})]})}function S(e){let{activities:t=[],isLoading:r=!1,showAll:s=!1,className:c=""}=e,i=s?t:t.slice(0,5);return r?(0,a.jsx)(A,{className:c}):(0,a.jsxs)("div",{className:(0,x.cn)("bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",c),children:[(0,a.jsx)(w,{showAll:s,hasMore:t.length>5}),(0,a.jsx)("div",{className:"space-y-4",children:i.map((e,t)=>(0,a.jsx)(P,{activity:e,isLast:t===i.length-1},e.id))}),0===i.length&&(0,a.jsx)(k,{})]})}var E=r(89099),T=r(56467);let C=(0,T.A)("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),_=(0,T.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var D=r(92362),I=r(75486),R=r(97730),M=r(9753),O=r(26664);let q=[{id:"create-project",title:"New Project",description:"Start a new fibre installation project",icon:C,route:"/app/projects/create",requiredPermissions:[O.aX.PROJECTS_CREATE],variant:"primary"},{id:"add-staff",title:"Add Staff",description:"Register new team member",icon:_,route:"/app/staff/new",requiredPermissions:[O.aX.STAFF_CREATE],variant:"secondary"},{id:"create-sow",title:"Upload SOW",description:"Upload Statement of Work document",icon:v.A,route:"/app/sow/upload",requiredPermissions:[O.aX.MANAGE_SOW],variant:"secondary"},{id:"schedule-meeting",title:"Schedule Meeting",description:"Plan team or client meeting",icon:l.A,route:"/app/communications/meetings/create",requiredPermissions:[O.aX.CREATE_COMMUNICATIONS],variant:"secondary"},{id:"report-issue",title:"Report Issue",description:"Log project issue or concern",icon:g.A,route:"/app/issues/create",requiredPermissions:[O.aX.CREATE_COMMUNICATIONS],variant:"warning"},{id:"track-poles",title:"Pole Tracker",description:"View and update pole installations",icon:n.A,route:"/app/pole-tracker",requiredPermissions:[O.aX.PROJECTS_READ],variant:"secondary"},{id:"manage-inventory",title:"Inventory",description:"Check stock and materials",icon:D.A,route:"/app/procurement",requiredPermissions:[O.aX.VIEW_PROCUREMENT],variant:"secondary"},{id:"view-analytics",title:"Analytics",description:"View project performance metrics",icon:I.A,route:"/app/analytics",requiredPermissions:[O.aX.ANALYTICS_READ],variant:"secondary"}],F={primary:{card:"bg-primary-50 border-primary-200 hover:bg-primary-100",icon:"bg-primary-500 text-white",title:"text-primary-900",description:"text-primary-700"},secondary:{card:"bg-[var(--ff-surface-primary)] border-[var(--ff-border-primary)] hover:bg-[var(--ff-surface-secondary)]",icon:"bg-neutral-100 text-neutral-700",title:"text-[var(--ff-text-primary)]",description:"text-[var(--ff-text-secondary)]"},success:{card:"bg-success-50 border-success-200 hover:bg-success-100",icon:"bg-success-500 text-white",title:"text-success-900",description:"text-success-700"},warning:{card:"bg-warning-50 border-warning-200 hover:bg-warning-100",icon:"bg-warning-500 text-white",title:"text-warning-900",description:"text-warning-700"}};function U(e){let{className:t=""}=e,r=(0,E.useRouter)(),{hasPermission:s}=(0,M.A)(),c=q.filter(e=>0===e.requiredPermissions.length||e.requiredPermissions.some(e=>s(e)));return(0,a.jsxs)("div",{className:(0,x.cn)("bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",t),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,a.jsx)(R.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[var(--ff-text-primary)]",children:"Quick Actions"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(e=>{let t=e.icon,s=F[e.variant||"secondary"];return(0,a.jsx)("button",{onClick:()=>{r.push(e.route)},className:(0,x.cn)("p-4 rounded-lg border transition-all duration-200 text-left group","hover:shadow-md hover:scale-[1.02] active:scale-[0.98]",s.card),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0","group-hover:scale-110 transition-transform duration-200",s.icon),children:(0,a.jsx)(t,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:(0,x.cn)("font-medium text-sm mb-1 group-hover:translate-x-1 transition-transform duration-200",s.title),children:e.title}),(0,a.jsx)("p",{className:(0,x.cn)("text-xs leading-relaxed",s.description),children:e.description})]})]})},e.id)})}),0===c.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(R.A,{className:"w-12 h-12 text-[var(--ff-text-tertiary)] mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-[var(--ff-text-secondary)]",children:"No quick actions available"}),(0,a.jsx)("p",{className:"text-xs text-[var(--ff-text-tertiary)] mt-1",children:"Contact your administrator for access permissions"})]})]})}var X=r(68359),J=r(40669),L=r(96679);function V(){let{currentUser:e,hasPermission:t}=(0,M.A)(),{stats:r,trends:p,formatNumber:m,formatCurrency:x,formatPercentage:u}=(0,J.ni)(),f=(0,L.Pj)(r,p,{formatNumber:m,formatCurrency:x,formatPercentage:u}),h=[{title:"Active Projects",value:r.activeProjects,icon:s.A,description:"Total projects data not available",trend:(null==p?void 0:p.activeProjects)?{value:p.activeProjects.percentage,isPositive:"up"===p.activeProjects.direction,label:"vs last month"}:{value:0,isPositive:!0,label:"no trend data"},variant:"primary",requiredPermissions:[O.aX.PROJECTS_READ]},{title:"Team Members",value:r.teamMembers,icon:c.A,description:"Active staff members",trend:(null==p?void 0:p.teamMembers)?{value:p.teamMembers.percentage,isPositive:"up"===p.teamMembers.direction,label:"change this month"}:{value:0,isPositive:!0,label:"no trend data"},variant:"success",requiredPermissions:[O.aX.STAFF_READ]},{title:"Tasks Completed",value:r.completedTasks,icon:i.A,description:r.completedTasks>0?"From all projects":"No tasks tracked yet",trend:(null==p?void 0:p.completedTasks)?{value:p.completedTasks.percentage,isPositive:"up"===p.completedTasks.direction,label:"vs last week"}:{value:0,isPositive:!0,label:"no trend data"},variant:"success",requiredPermissions:[O.aX.PROJECTS_READ]},{title:"Open Issues",value:r.openIssues,icon:o.A,description:0===r.openIssues?"No issues found":"Issues tracked",trend:(null==p?void 0:p.openIssues)?{value:p.openIssues.percentage,isPositive:"down"===p.openIssues.direction,label:"requires attention"}:{value:0,isPositive:!0,label:"no trend data"},variant:r.openIssues>0?"warning":"success",requiredPermissions:[O.aX.VIEW_COMMUNICATIONS]},{title:"Poles Installed",value:r.polesInstalled,icon:n.A,description:0===r.polesInstalled?"No installations tracked":"Infrastructure deployed",trend:(null==p?void 0:p.polesInstalled)?{value:p.polesInstalled.percentage,isPositive:"up"===p.polesInstalled.direction,label:"infrastructure growth"}:{value:0,isPositive:!0,label:"no trend data"},variant:"primary",requiredPermissions:[O.aX.PROJECTS_READ]}].filter(e=>0===e.requiredPermissions.length||e.requiredPermissions.some(e=>t(e)));return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:(()=>{var t;let r=new Date().getHours(),a=(null==e||null==(t=e.displayName)?void 0:t.split(" ")[0])||"there";return r<12?"Good morning, ".concat(a):r<17?"Good afternoon, ".concat(a):"Good evening, ".concat(a)})()}),(0,a.jsx)("p",{className:"text-primary-100",children:"Welcome to your FibreFlow dashboard. Here's what's happening with your projects."})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-4 text-right",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-primary-200",children:"Today"}),(0,a.jsx)("div",{className:"font-semibold",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"w-6 h-6"})})]})]})}),(0,a.jsx)(X.M,{cards:f.filter(e=>{var r,a,s,c,i;return(null==(r=e.route)?void 0:r.includes("/projects"))?t(O.aX.PROJECTS_READ):(null==(a=e.route)?void 0:a.includes("/staff"))?t(O.aX.STAFF_READ):(null==(s=e.route)?void 0:s.includes("/tasks"))?t(O.aX.PROJECTS_READ):(null==(c=e.route)?void 0:c.includes("/issues"))?t(O.aX.VIEW_COMMUNICATIONS):null==(i=e.route)||!i.includes("/analytics")||t(O.aX.ANALYTICS_READ)}),columns:3,className:"mb-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t(O.aX.PROJECTS_READ)&&(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(j,{})}),(0,a.jsx)("div",{className:t(O.aX.PROJECTS_READ)?"":"lg:col-span-3",children:(0,a.jsx)(U,{})})]}),t(O.aX.VIEW_COMMUNICATIONS)&&(0,a.jsx)("div",{className:"grid grid-cols-1",children:(0,a.jsx)(S,{})}),t(O.aX.ANALYTICS_READ)&&(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-primary-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-[var(--ff-text-primary)]",children:"Performance Metrics"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-secondary)] rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-success-600",children:r.qualityScore>0?u(r.qualityScore):"0%"}),(0,a.jsx)("div",{className:"text-sm text-[var(--ff-text-secondary)]",children:"Quality Score"})]}),(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-secondary)] rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:r.onTimeDelivery>0?u(r.onTimeDelivery):"0%"}),(0,a.jsx)("div",{className:"text-sm text-[var(--ff-text-secondary)]",children:"On-Time Delivery"})]}),(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-secondary)] rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-warning-600",children:r.performanceScore>0?u(r.performanceScore):"0%"}),(0,a.jsx)("div",{className:"text-sm text-[var(--ff-text-secondary)]",children:"Performance Score"})]}),(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-secondary)] rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-info-600",children:r.totalRevenue>0?x(r.totalRevenue):"R0"}),(0,a.jsx)("div",{className:"text-sm text-[var(--ff-text-secondary)]",children:"Total Revenue"})]})]})]}),0===h.length&&(0,a.jsxs)("div",{className:"bg-[var(--ff-surface-primary)] rounded-lg border border-[var(--ff-border-primary)] p-12 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-[var(--ff-surface-secondary)] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-[var(--ff-text-tertiary)]"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-[var(--ff-text-primary)] mb-2",children:"Welcome to FibreFlow"}),(0,a.jsx)("p",{className:"text-[var(--ff-text-secondary)] mb-4",children:"Your dashboard will display relevant information once you have access to project data."}),(0,a.jsx)("p",{className:"text-sm text-[var(--ff-text-tertiary)]",children:"Contact your administrator to request additional permissions."})]})]})}},82074:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},92362:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},97730:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(56467).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}}]);